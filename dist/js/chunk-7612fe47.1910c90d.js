(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7612fe47"],{"28da":function(e,t,a){"use strict";var n=a("1098"),r=a.n(n),s=a("6042"),o=a.n(s),i=a("41b2"),c=a.n(i),l=a("d4b2"),u=a("a615"),h=a("9839"),m=a("b558"),p=a("b24f"),f=a.n(p),d=a("4d91"),g=a("7b05"),b=a("daa3");function v(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];for(var r=0;r<t.length;r++)t[r]&&"function"===typeof t[r]&&t[r].apply(this,a)}}var _={name:"InputElement",inheritAttrs:!1,props:{value:d["a"].any,disabled:d["a"].bool,placeholder:d["a"].string},render:function(){var e=this.$slots,t=void 0===e?{}:e,a=this.$attrs,n=void 0===a?{}:a,r=this.placeholder,s=Object(b["k"])(this),o=Object(b["l"])(this),i=void 0===o.value?"":o.value,l=t["default"][0],u=t["default"][0].componentOptions,h=void 0===u?{}:u,m=h.listeners,p=void 0===m?{}:m,d=c()({},p),_=!0,$=!1,w=void 0;try{for(var y,O=Object.entries(s)[Symbol.iterator]();!(_=(y=O.next()).done);_=!0){var P=y.value,k=f()(P,2),x=k[0],j=k[1];d[x]=v(j,p[x])}}catch(C){$=!0,w=C}finally{try{!_&&O["return"]&&O["return"]()}finally{if($)throw w}}var A=c()({},n,{value:i});return delete o.placeholder,r&&(o.placeholder=r,A.placeholder=r),Object(g["a"])(l,{domProps:{value:i},props:o,on:d,attrs:A,ref:"ele"})}},$=a("9cba"),w=a("db14"),y=c()({},Object(h["a"])(),{value:h["c"],defaultValue:h["c"],dataSource:d["a"].array,dropdownMenuStyle:d["a"].object,optionLabelProp:String,dropdownMatchSelectWidth:d["a"].bool}),O={name:"AAutoComplete",props:c()({},y,{prefixCls:d["a"].string,showSearch:d["a"].bool.def(!1),transitionName:d["a"].string.def("slide-up"),choiceTransitionName:d["a"].string.def("zoom"),autoFocus:d["a"].bool,backfill:d["a"].bool,optionLabelProp:d["a"].string.def("children"),filterOption:d["a"].oneOfType([d["a"].bool,d["a"].func]).def(!1),defaultActiveFirstOption:d["a"].bool.def(!0)}),Option:c()({},l["a"],{name:"AAutoCompleteOption"}),OptGroup:c()({},u["a"],{name:"AAutoCompleteOptGroup"}),model:{prop:"value",event:"change"},inject:{configProvider:{default:function(){return $["a"]}}},provide:function(){return{savePopupRef:this.savePopupRef}},methods:{savePopupRef:function(e){this.popupRef=e},getInputElement:function(){var e=this.$createElement,t=this.$slots,a=this.placeholder,n=Object(b["c"])(t["default"]),r=n.length?n[0]:e(m["a"],{attrs:{lazy:!1}});return e(_,{attrs:{placeholder:a}},[r])},focus:function(){this.$refs.select&&this.$refs.select.focus()},blur:function(){this.$refs.select&&this.$refs.select.blur()}},render:function(){var e,t=arguments[0],a=this.size,n=this.prefixCls,s=this.optionLabelProp,i=this.dataSource,u=this.$slots,m=this.configProvider.getPrefixCls,p=m("select",n),f=(e={},o()(e,p+"-lg","large"===a),o()(e,p+"-sm","small"===a),o()(e,p+"-show-search",!0),o()(e,p+"-auto-complete",!0),e),d=void 0,g=Object(b["c"])(u.dataSource);d=g.length?g:i?i.map((function(e){if(Object(b["w"])(e))return e;switch("undefined"===typeof e?"undefined":r()(e)){case"string":return t(l["a"],{key:e},[e]);case"object":return t(l["a"],{key:e.value},[e.text]);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}})):[];var v={props:c()({},Object(b["l"])(this),{mode:h["d"].SECRET_COMBOBOX_MODE_DO_NOT_USE,optionLabelProp:s,getInputElement:this.getInputElement,notFoundContent:Object(b["g"])(this,"notFoundContent"),placeholder:""}),class:f,ref:"select",on:Object(b["k"])(this)};return t(h["d"],v,[d])},install:function(e){e.use(w["a"]),e.component(O.name,O),e.component(O.Option.name,O.Option),e.component(O.OptGroup.name,O.OptGroup)}};t["a"]=O},"2d27":function(e,t,a){"use strict";a("5c88")},4955:function(e,t,a){"use strict";a("b2a3"),a("dc88"),a("2ef0"),a("5704")},"5c88":function(e,t,a){},7143:function(e,t,a){"use strict";var n=a("1da1"),r=(a("96cf"),a("d3b7"),{data:function(){return{fileList:[],previewImage:"",previewVisible:!1,uploadingImage:!1}},methods:{uploadImage:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.uploadingImage=!0,n=new FormData,n.append("file",e.file),a.next=5,t.$getBase64(e.file);case 5:r=a.sent,t.$store.dispatch("uploadImage",n).then((function(e){t.fileList.push({uid:e.filename,name:e.filename,status:"done",url:r})})).catch((function(e){})).finally((function(){t.uploadingImage=!1}));case 7:case"end":return a.stop()}}),a)})))()},handleChange:function(e){var t=e.fileList;0===t.length&&(this.fileList=t)},handlePreview:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,t.$getBase64(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()}}});t["a"]=r},a3f0:function(e,t,a){"use strict";t["a"]={first_name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],last_name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],merchant_branches1:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],patronymic:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],phone_number:[{required:!0,message:"Пожалуйста, введите",trigger:"change"}],merchant_branches:[{required:!0,type:"array",message:"Пожалуйста, введите",trigger:"blur"}]}},dc88:function(e,t,a){},f676:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-navigation",{attrs:{list:[{name:e.$t("Список Пос агенты"),link:""},{name:e.$t("Форма Пос агенты"),link:""}],isBack:{return:!0,flag:!0},noBorder:""}}),a("a-card",[a("a-divider",{attrs:{orientation:"left"}},[e._v(e._s(e.$t("Form")))]),a("a-form-model",{ref:"ruleForm",attrs:{colon:!1,model:e.form,rules:e.rules}},[a("a-row",{staticClass:"form-row",attrs:{gutter:16}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:e.$t("First_name"),prop:"first_name"}},[a("a-input",{attrs:{placeholder:e.$t("first_name")},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:e.$t("Last_name"),prop:"last_name"}},[a("a-input",{attrs:{placeholder:e.$t("last_name")},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:e.$t("patronymic"),prop:"patronymic"}},[a("a-input",{attrs:{placeholder:e.$t("patronymic")},model:{value:e.form.patronymic,callback:function(t){e.$set(e.form,"patronymic",t)},expression:"form.patronymic"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:e.$t("phone_number"),prop:"phone_number"}},[a("a-input",{attrs:{placeholder:e.$t("phone_number")},on:{keypress:e.onPhoneNumber},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:e.$t("merchant_branches"),prop:"merchant_branches"}},[a("auto-complete",{staticStyle:{width:"100%"},attrs:{value:e.form.merchant_branches[0],"data-source":e.computedMerchantBranch},on:{search:e.searchBranch},model:{value:e.form.merchant_branches[0],callback:function(t){e.$set(e.form.merchant_branches,0,t)},expression:"form.merchant_branches[0]"}})],1)],1)],1),a("a-row",{staticClass:"form-row",attrs:{gutter:16}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:e.$t("Image upload")}},[a("a-upload",{attrs:{customRequest:e.uploadImage,"list-type":"picture-card","file-list":e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a("div",[a("a-icon",{attrs:{type:e.uploadingImage?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.$t("button.upload")))])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:function(t){e.previewVisible=!1}}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:e.previewImage,src:e.previewImage}})])],1)],1)],1),a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{staticStyle:{"margin-right":"6px"},attrs:{type:"grey"},on:{click:e.cancelPost}},[e._v(e._s(e.$t("button.cancel")))]),e.isNewForm?a("a-button",{attrs:{type:"primary"},on:{click:e.postPosAgents}},[e._v(e._s(e.$t("button.create")))]):a("a-button",{attrs:{type:"primary"},on:{click:e.updatePosAgents}},[e._v(e._s(e.$t("button.save")))])],1)],1)],1)],1)],1)},r=[],s=a("5530"),o=(a("4955"),a("28da")),i=(a("ac1f"),a("1276"),a("d81d"),a("99af"),a("b0c0"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("a3f0")),c=a("7143"),l={mixins:[c["a"]],components:{AutoComplete:o["a"]},data:function(){return{merchant_branch:[],searchText:"",merchant:[],isNewForm:!1,form:{first_name:"",last_name:"",patronymic:"",photo:"",merchant_branches:[],accounts:{phone_number:"998",is_active:!0}},rules:i["a"]}},methods:{callback:function(){},onPhoneNumber:function(e){var t=e||window.event,a=t.keyCode||t.which;a="paste"===t.type?event.clipboardData.getData("text/plain"):String.fromCharCode(a);var n=/[0-9]|\./;n.test(a)||(t.returnValue=!1,t.preventDefault&&t.preventDefault()),this.form.phone_number.length>=12&&(t.returnValue=!1,t.preventDefault&&t.preventDefault())},dust:function(){return{first_name:this.form.first_name,last_name:this.form.last_name,merchant_branches:this.form.merchant_branches,patronymic:this.form.patronymic,photo:this.fileList.length?this.fileList[0].uid:this.form.photo,accounts:[{is_active:!0,phone_number:this.form.phone_number}]}},dust1:function(){return{first_name:this.form.first_name,last_name:this.form.last_name,merchant_branches:this.form.merchant_branches,photo:this.fileList.length?this.fileList[0].uid:this.form.photo,guid:this.form.guid}},checkPost:function(){var e=null;return this.$refs.ruleForm.validate((function(t){return t?(e=!0,!0):(e=!1,!1)})),e},branchSelectHandler:function(e){this.form.merchant_branches=[e]},searchBranch:function(e){this.searchText=e},postPosAgents:function(){var e=this;if(!1===this.checkPost())return-1;this.$store.dispatch("postPosAgents",this.dust()).then((function(t){e.$message.success("Pos agent  added successfully"),e.$router.go(-1)})).catch((function(t){e.$alertMessage(t.response.data.message)}))},getPosAgent:function(e){var t=this;this.$store.dispatch("getPosAgent",this.$route.params.id).then((function(e){var a;t.fileList=[{uid:e.pos_agent.photo.split("/").pop(),url:e.pos_agent.photo,status:"done",name:e.pos_agent.photo}],t.form=Object(s["a"])(Object(s["a"])({},e.pos_agent),{},{merchant_branches:[null===(a=e.pos_agent.merchant_branches[0])||void 0===a?void 0:a.guid]})})).catch((function(e){t.$alertMessage(e.response.data.message)}))},getBranches:function(){var e=this;this.$store.dispatch("getBranches").then((function(t){e.merchant_branch=t.merchant_branches.map((function(e){return{value:e.guid,text:"".concat(e.merchant_name," / ").concat(e.name)}}))})).catch((function(t){e.$alertMessage(t.response.data.message)}))},getMerchantUser:function(e){var t=this;return this.$store.dispatch("getMerchantUser",e).then((function(e){t.merchant=e.merchant})).catch((function(e){t.$alertMessage(e.response.data.message)})),this.merchant.name},updatePosAgents:function(){var e=this;if(!1===this.checkPost())return-1;this.$store.dispatch("updatePosAgents",this.dust1()).then((function(t){e.$message.success("Pos agents has updated successfully"),e.$router.go(-1)})).catch((function(t){e.$alertMessage(t.response.data.message)}))},cancelPost:function(){this.$router.go(-1)}},computed:{computedMerchantBranch:function(){var e=this;return this.merchant_branch.filter((function(t){return t.text.toLowerCase().includes(e.searchText)}))}},created:function(){this.$isEmptyObj(this.$route.params)?this.isNewForm=!0:this.getPosAgent(this.$route.params.id),this.getBranches()},watch:{merchant_branch:function(e){}}},u=l,h=(a("2d27"),a("2877")),m=Object(h["a"])(u,n,r,!1,null,"27c03a10",null);t["default"]=m.exports}}]);