(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e5d6c10"],{2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var r=a("6b75");function n(t){if(Array.isArray(t))return Object(r["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=a("06c5");function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return n(t)||s(t)||Object(o["a"])(t)||i()}},"90cc":function(t,e,a){"use strict";a("cefa")},"9f06":function(t,e,a){t.exports=a.p+"img/pdf.c1ae6d25.png"},cd50:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-navigation",{attrs:{list:[{name:t.$t("Список продавцов"),link:"/merchants/list"},{name:t.$t("Форма продавца"),link:""}],isBack:{flag:!0,link:"/merchants/list"}}}),a("a-card",[a("a-tabs",{attrs:{"default-active-key":"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"Детали"}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:22,offset:1}},[a("a-form-model",{ref:"ruleForm",attrs:{colon:!1,model:t.formData,rules:t.rules}},[a("a-row",{staticClass:"form-row",attrs:{gutter:16}},[a("a-divider",{staticClass:"divider",attrs:{orientation:"left"}},[t._v(t._s(t.$t("Информация о торговце")))]),a("a-col",{attrs:{span:24,md:8}},[a("a-form-model-item",{ref:"name",attrs:{label:t.$t("name"),prop:"name"}},[a("a-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Email"),prop:"email"}},[a("a-input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Phone number"),prop:"phone_number"}},[a("a-input",{on:{keypress:t.onPhoneNumber},model:{value:t.formData.phone_number,callback:function(e){t.$set(t.formData,"phone_number",e)},expression:"formData.phone_number"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Adress"),prop:"address"}},[a("a-input",{model:{value:t.formData.address.title,callback:function(e){t.$set(t.formData.address,"title",e)},expression:"formData.address.title"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Country"),prop:"country"}},[a("a-input",{model:{value:t.formData.address.country,callback:function(e){t.$set(t.formData.address,"country",e)},expression:"formData.address.country"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("City"),prop:"city"}},[a("a-input",{model:{value:t.formData.address.city,callback:function(e){t.$set(t.formData.address,"city",e)},expression:"formData.address.city"}})],1)],1),a("a-divider",{staticClass:"div",attrs:{orientation:"left"}},[t._v(t._s(t.$t("Реквизит")))]),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Bank name"),prop:"requisite.bank_name"}},[a("a-input",{model:{value:t.formData.requisite.bank_name,callback:function(e){t.$set(t.formData.requisite,"bank_name",e)},expression:"formData.requisite.bank_name"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Account number"),prop:"requisite.account_number"}},[a("a-input",{attrs:{type:"number"},model:{value:t.formData.requisite.account_number,callback:function(e){t.$set(t.formData.requisite,"account_number",e)},expression:"formData.requisite.account_number"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Legal adress"),prop:"requisite.legal_address"}},[a("a-input",{model:{value:t.formData.requisite.legal_address,callback:function(e){t.$set(t.formData.requisite,"legal_address",e)},expression:"formData.requisite.legal_address"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Inn"),prop:"requisite.inn"}},[a("a-input",{attrs:{type:"number"},model:{value:t.formData.requisite.inn,callback:function(e){t.$set(t.formData.requisite,"inn",e)},expression:"formData.requisite.inn"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("Mfo code"),prop:"requisite.mfo_code"}},[a("a-input",{model:{value:t.formData.requisite.mfo_code,callback:function(e){t.$set(t.formData.requisite,"mfo_code",e)},expression:"formData.requisite.mfo_code"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{ref:"requisite.has_nds",attrs:{label:t.$t("hasVAT")}},[a("a-switch",{model:{value:t.formData.has_nds,callback:function(e){t.$set(t.formData,"has_nds",e)},expression:"formData.has_nds"}})],1)],1),a("a-divider",{staticClass:"divider",attrs:{orientation:"left"}},[t._v(t._s(t.$t("Договор")))]),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:t.$t("File upload")}},[a("a-upload",{attrs:{customRequest:t.uploadImage,"list-type":"picture-card","file-list":t.fileList,"before-upload":t.beforeUpload},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<1?a("div",[a("a-icon",{attrs:{type:t.uploadingImage?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.$t("button.upload")))])],1):t._e()])],1)],1),a("a-col",{staticClass:"mx",attrs:{md:6}},[a("a-form-model-item",{ref:"contract.date",attrs:{label:t.$t("date1"),prop:"contract.date"}},[a("a-date-picker",{attrs:{format:t.$dateFormat},model:{value:t.formData.contract.started_at,callback:function(e){t.$set(t.formData.contract,"started_at",e)},expression:"formData.contract.started_at"}})],1)],1),a("a-col",{staticClass:"mx",attrs:{md:6}},[a("a-form-model-item",{ref:"contract.expire_date",attrs:{label:t.$t("expire_date"),prop:"contract.expire_date"}},[a("a-date-picker",{attrs:{format:t.$dateFormat},model:{value:t.formData.contract.expired_at,callback:function(e){t.$set(t.formData.contract,"expired_at",e)},expression:"formData.contract.expired_at"}})],1)],1),a("a-col",{attrs:{md:10}},[a("a-form-model-item",{ref:"contract.number",attrs:{label:t.$t("number"),prop:"contract.number"}},[a("a-input",{model:{value:t.formData.contract.number,callback:function(e){t.$set(t.formData.contract,"number",e)},expression:"formData.contract.number"}})],1)],1),a("a-divider",{staticClass:"divider",attrs:{orientation:"left"}},[t._v(t._s(t.$t("phoneAuth")))]),a("a-col",{staticClass:"mx",attrs:{span:"24"}},[t._l(t.numbers,(function(e,r){return a("a-row",{key:r,attrs:{gutter:[8,8],type:"flex"}},[a("a-col",{attrs:{span:"10"}},[a("a-form-model-item",{staticClass:"my-0 py-0",attrs:{prop:"number"}},[a("a-input",{attrs:{disabled:12===e.number.length},on:{keypress:t.onPhoneNumber,change:function(e){return t.changePhone(e,r)}},model:{value:e.number,callback:function(a){t.$set(e,"number",a)},expression:"item.number"}})],1)],1),a("a-col",{attrs:{span:"4"}},[a("a-form-model-item",[a("a-button",{on:{click:function(a){return t.removeNumber(e)}}},[a("a-icon",{attrs:{type:"delete"}})],1)],1)],1)],1)})),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{staticClass:"mx-1",on:{click:t.addNewNumber}},[t._v("Добавить")]),a("a-button",{on:{click:t.postPhoneNumber}},[t._v(t._s(t.$t("button.save")))])],1)],1)],2),a("a-col",{attrs:{span:"24"}},[a("a-form-model-item",{attrs:{label:" "}},[a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{staticClass:"mx-1",attrs:{type:"grey"},on:{click:t.cancelPost}},[t._v(t._s(t.$t("button.cancel")))]),t.isNewForm?a("a-button",{attrs:{type:"primary"},on:{click:t.postMerchantUsers}},[t._v(t._s(t.$t("button.create")))]):a("a-button",{attrs:{type:"primary"},on:{click:t.updateMerchantUsers}},[t._v(t._s(t.$t("button.save")))])],1)],1)],1)],1)],1)],1)],1)],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:t.$t("owners")}},[a("AddOwners")],1),a("a-tab-pane",{key:"3",attrs:{tab:"Прибыль и Скидка"}},[a("ProfitAndDiscountSet")],1),a("a-tab-pane",{key:"4",attrs:{tab:"Восстановление пароля"}},[a("PasswordSet",{attrs:{username:t.formData.name}})],1)],1)],1)],1)},n=[],s=a("5530"),o=a("1da1"),i=a("2909"),u=(a("96cf"),a("4de4"),a("d3b7"),a("ac1f"),a("5319"),a("99af"),a("caad"),a("b0c0"),a("d81d"),a("1276"),a("f599")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form-model",{ref:"ruleForm",attrs:{model:t.users,colon:!1}},t._l(t.users,(function(e){return a("a-row",{key:e.guid,attrs:{type:"flex",gutter:[8,8]}},[a("a-col",{attrs:{span:"12"}},[a("a-form-model-item",{attrs:{label:t.$t("Имя пользователя"),prop:"first_name"}},[a("a-input",{attrs:{place:"",disabled:!!e.username},model:{value:e.username,callback:function(a){t.$set(e,"username",a)},expression:"item.username"}})],1)],1),a("a-col",{attrs:{span:"12"}},[a("a-form-model-item",{attrs:{label:t.$t("new_password"),prop:"first_name"}},[a("a-input",{attrs:{place:""},model:{value:e.new_password,callback:function(a){t.$set(e,"new_password",a)},expression:"item.new_password"}})],1)],1),a("a-col",{attrs:{span:"24"}},[a("a-form-model-item",[a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.updateOwnerPassword(e.guid,e.new_password)}}},[t._v(t._s(t.$t("button.create")))])],1)],1)],1)],1),a("a-divider",{staticClass:"divider",attrs:{orientation:"left"}})],1)})),1)],1)},l=[],m={data:function(){return{loading:!1,users:[],form:{new_password:""}}},methods:{resetPassword:function(){var t=this;if(!this.$isValid(this))return-1;this.loading=!0,this.$store.dispatch("passwordSetup",{guid:this.$route.params.id,data:this.form}).then((function(e){t.$alertMessage("success","Updated successfully","",t)})).finally((function(){t.loading=!1})).catch((function(){}))},getMerchantsOwnerInfo:function(){var t=this;this.$store.dispatch("getMerchantsOwnerInfo",this.$route.params.id).then((function(e){e.users&&(t.users=e.users.map((function(t){return Object(s["a"])({new_password:""},t)})))})).catch((function(t){}))},updateOwnerPassword:function(t,e){var a=this;this.$store.dispatch("passwordSetup",{guid:this.$route.params.id,ownerId:t,data:{new_password:e}}).then((function(t){a.$alertMessage("success","Updated successfully","",a)})).finally((function(){a.loading=!1})).catch((function(){}))}},created:function(){this.getMerchantsOwnerInfo()}},d=m,p=a("2877"),f=Object(p["a"])(d,c,l,!1,null,null,null),h=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.form,colon:!1}},[a("a-row",{attrs:{type:"flex",gutter:[8,8]}},[a("a-col",{attrs:{span:"10"}},[a("a-divider",{staticClass:"divider",attrs:{orientation:"left"}},[t._v(t._s(t.$t("Прибыль")))]),a("a-col",{staticClass:"mx my-1"},[t._l(t.markup_list,(function(e,r){return a("a-row",{key:r,attrs:{type:"flex",gutter:[8,8]}},[a("a-col",{staticStyle:{width:"140px"}},[a("a-form-model-item",{staticClass:"my-0 py-0",attrs:{label:t.$t("Прибыль"),prop:"margin"}},[a("a-input",{attrs:{value:e.percentage,max:100,min:0,type:"number",addonAfter:"%",stringMode:!1},model:{value:e.percentage,callback:function(a){t.$set(e,"percentage",t._n(a))},expression:"item.percentage"}})],1)],1),a("a-col",[a("a-form-model-item",{attrs:{label:t.$t("month"),prop:"month"}},[a("a-input-number",{attrs:{max:100,min:0,formatter:function(t){return""+t}},model:{value:e.period_month,callback:function(a){t.$set(e,"period_month",a)},expression:"item.period_month"}})],1)],1),a("a-col",[a("a-form-model-item",{attrs:{label:" "}},[a("a-button",{on:{click:function(a){return t.deleteMarkup(e.id)}}},[t._v("X")])],1)],1)],1)})),a("a-button",{on:{click:function(e){return t.addNewMargin()}}},[t._v("Добавить")])],2)],1),a("a-col",{attrs:{span:"10",offset:"1"}},[a("a-divider",{staticClass:"divider",attrs:{orientation:"left"}},[t._v(t._s(t.$t("discount")))]),t._l(t.discounts,(function(e){return a("a-row",{key:e,attrs:{gutter:[8,8],type:"flex"}},[a("a-col",[a("a-form-model-item",{staticClass:"my-0 py-0",attrs:{label:t.$t("discount"),prop:"percentager"}},[a("a-input-number",{attrs:{max:100,min:0,formatter:function(t){return t+"%"},parser:function(t){return t.replace("%","")}},model:{value:e.percentage,callback:function(a){t.$set(e,"percentage",a)},expression:"item.percentage"}})],1)],1),a("a-col",[a("a-form-model-item",{attrs:{label:t.$t("month"),prop:"discountmounth"}},[a("a-input-number",{attrs:{max:100,min:0,formatter:function(t){return""+t}},model:{value:e.period_month,callback:function(a){t.$set(e,"period_month",a)},expression:"item.period_month"}})],1)],1),a("a-col",[a("a-form-model-item",{attrs:{label:" "}},[a("a-button",{on:{click:function(a){return t.deleteDiscount(e.id)}}},[t._v("X")])],1)],1)],1)})),a("a-button",{on:{click:function(e){return t.addNewDiscount()}}},[t._v("Добавить")])],2),a("a-col",{attrs:{span:"24"}},[a("a-form-model-item",{attrs:{label:" "}},[a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.postData}},[t._v(t._s(t.$t("button.create")))])],1)],1)],1)],1)],1)],1)],1)},g=[],_={data:function(){return{rules:{month:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],margin:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],discountmounth:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],percentager:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}]},discounts:[],markup_list:[]}},methods:{addNewMargin:function(){this.markup_list.push({percentage:0,period_month:0,merchant_id:this.$route.params.id})},addNewDiscount:function(){this.discounts.push({percentage:0,period_month:0,merchant_id:this.$route.params.id})},postData:function(){var t=this;this.$store.dispatch("postMurkups",{guid:this.$route.params.id,data:{murkups:Object(i["a"])(this.markup_list)}}).then((function(e){t.$alertMessage("success","Posted successfully","",t)})).finally((function(){t.loading=!1})).catch((function(){})),this.$store.dispatch("postDiscounts",{guid:this.$route.params.id,data:{discounts:Object(i["a"])(this.discounts)}}).then((function(e){t.$alertMessage("success","Posted successfully","",t)})).finally((function(){t.loading=!1})).catch((function(){}))},getDiscounts:function(t){var e=this;this.$store.dispatch("getDiscounts",t).then((function(t){t.list&&(e.discounts=t.list)})).catch((function(t){}))},getMarkups:function(t){var e=this;this.$store.dispatch("getMarkups",t).then((function(t){t.list&&(e.markup_list=t.list)})).catch((function(t){}))},deleteDiscount:function(t){var e=this,a={merchant_id:this.$route.params.id,discunt_id:t};a.merchant_id&&this.$store.dispatch("deleteDiscount",a).then((function(t){e.discounts=e.discounts.filter((function(t){return t.id!==a.discunt_id})),e.$message.success("Discount deleted !")}))},deleteMarkup:function(t){var e=this,a={merchant_id:this.$route.params.id,markup_id:t};a.merchant_id&&this.$store.dispatch("deleteMarkup",a).then((function(t){e.markup_list=e.markup_list.filter((function(t){return t.id!==a.markup_id})),e.$message.success("Discount deleted !")}))}},created:function(){this.getMarkups(this.$route.params.id),this.getDiscounts(this.$route.params.id)}},v=_,$=Object(p["a"])(v,b,g,!1,null,null,null),w=$.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.users,colon:!1}},[t._l(t.users,(function(e,r){return a("a-row",{key:r,attrs:{type:"flex",gutter:[8,8]}},[a("a-col",{attrs:{span:"8"}},[a("a-form-model-item",{attrs:{label:t.$t("FirstName"),prop:"first_name"}},[a("a-input",{attrs:{place:""},model:{value:e.first_name,callback:function(a){t.$set(e,"first_name",a)},expression:"item.first_name"}})],1)],1),a("a-col",{attrs:{span:"8"}},[a("a-form-model-item",{attrs:{label:t.$t("middleName"),prop:"middle_name"}},[a("a-input",{attrs:{place:""},model:{value:e.middle_name,callback:function(a){t.$set(e,"middle_name",a)},expression:"item.middle_name"}})],1)],1),a("a-col",{attrs:{span:"8"}},[a("a-form-model-item",{attrs:{label:t.$t("LastName"),prop:"last_name"}},[a("a-input",{attrs:{place:""},model:{value:e.last_name,callback:function(a){t.$set(e,"last_name",a)},expression:"item.last_name"}})],1)],1),a("a-col",{attrs:{span:"4"}},[a("a-form-model-item",{ref:"contract.date",refInFor:!0,attrs:{label:t.$t("birthday"),prop:"birth_date"}},[a("a-date-picker",{attrs:{format:"YYYY-MM-DD"},model:{value:e.birth_date,callback:function(a){t.$set(e,"birth_date",a)},expression:"item.birth_date"}})],1)],1),a("a-col",{attrs:{span:"4"}},[a("a-form-model-item",{ref:"contract.date",refInFor:!0,attrs:{label:t.$t("Gender"),prop:"gender"}},[a("a-select",{attrs:{placeholder:t.$t("Gender")},model:{value:e.gender,callback:function(a){t.$set(e,"gender",a)},expression:"item.gender"}},[a("a-select-option",{attrs:{value:t.gender.male}},[t._v(" "+t._s(t.$t("gender.male"))+" ")]),a("a-select-option",{attrs:{value:t.gender.female}},[t._v(" "+t._s(t.$t("gender.female"))+" ")])],1)],1)],1),a("a-col",{attrs:{span:"8"}},[a("a-form-model-item",{attrs:{label:t.$t("username"),prop:"last_name"}},[a("a-input",{attrs:{place:""},model:{value:e.username,callback:function(a){t.$set(e,"username",a)},expression:"item.username"}})],1)],1),a("a-col",{attrs:{span:"8"}},[a("a-form-model-item",{attrs:{label:t.$t("phone"),prop:"phone_number"}},[a("a-input",{on:{keypress:t.onPhoneNumber,change:function(e){return t.changePhone(e,r)}},model:{value:e.phone_number,callback:function(a){t.$set(e,"phone_number",a)},expression:"item.phone_number"}})],1)],1),e.guid?t._e():a("a-col",{attrs:{span:"8"}},[a("a-form-model-item",{attrs:{label:t.$t("password"),prop:"password"}},[a("a-input",{attrs:{place:""},model:{value:e.password,callback:function(a){t.$set(e,"password",a)},expression:"item.password"}})],1)],1)],1)})),a("a-col",{attrs:{span:"24"}},[a("a-form-model-item",{attrs:{label:" "}},[a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{on:{click:function(e){return t.addNewOwner()}}},[t._v("Добавить")])],1)],1)],1)],1)],2),a("a-col",{attrs:{span:"24"}},[a("a-form-model-item",{attrs:{label:" "}},[a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.postData}},[t._v(t._s(t.$t("button.create")))])],1)],1)],1)],1)],1)},k=[],D={data:function(){return{users:[{first_name:"",birth_date:"",gender:this.$t("Gender"),last_name:"",middle_name:"",password:"",phone_number:"998",username:""}],usersList:[],gender:{male:"male",female:"women"},rules:{first_name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],last_name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],middle_name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],birth_date:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],phone_number:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],gender:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],password:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}]}}},methods:{postData:function(){var t=this,e=Object(s["a"])({merchant_id:this.$route.params.id},this.users);this.$store.dispatch("postMerchantsOwnerInfo",e).then((function(e){t.$alertMessage("success","Posted successfully","",t)})).finally((function(){t.loading=!1})).catch((function(){}))},getMerchantsOwnerInfo:function(){var t=this;this.$store.dispatch("getMerchantsOwnerInfo",this.$route.params.id).then((function(e){e.users&&(t.usersList=e.users)})).catch((function(t){}))},onPhoneNumber:function(t){var e=t||window.event,a=e.keyCode||e.which;a="paste"===e.type?event.clipboardData.getData("text/plain"):String.fromCharCode(a);var r=/[0-9]|\./;r.test(a)||(e.returnValue=!1,e.preventDefault&&e.preventDefault()),t.target.value.length>=12&&(e.returnValue=!1,e.preventDefault&&e.preventDefault())},addNewOwner:function(){this.users.push({first_name:"",birth_date:"",gender:this.$t("Gender"),last_name:"",middle_name:"",password:"",phone_number:"998",username:""})}},created:function(){this.getMerchantsOwnerInfo()}},x=D,q=Object(p["a"])(x,y,k,!1,null,null,null),M=q.exports,P=a("8bbf"),N=a.n(P),O={data:function(){return{BASE_URL:"https://cdn.iman.uz/documents/",fileList:[],previewImage:"",numbers:[{number:"998",id:Math.random()}],previewVisible:!1,uploadingImage:!1,rules:u["a"],isNewForm:!1,merchantTypeOptions:[{label:this.$t("product"),value:"product"},{label:this.$t("service"),value:"service"}],formData:{guid:this.$route.params.id,email:"",name:"",phone_number:"",has_nds:!0,created_at:"",updated_at:"",address:{guid:"",city:"",country:"",title:""},requisite:{guid:"",inn:"",mfo_code:"",bank_name:"",legal_address:"",account_number:""},contract:{id:null,merchant_id:"",expired_at:"",file_name:"",number:"",started_at:"",created_at:"",updated_at:""},type_id:2},discounts:{percentage:0,period_month:0},form:{address:"",margin_list:[],city:"",country:"",email:"",name:"",phone_number:"",merchant_type:"",has_nds:!0,requisite:{account_number:"",bank_name:"",inn:"",legal_address:"",mfo_code:"",swift:""},contract:{date:"",expire_date:"",file_name:"",number:""},director:{FirstName:"",LastName:"",PhoneNumber:""},discount:[{discount:0,month:0,id:Math.random()}]}}},components:{PasswordSet:h,ProfitAndDiscountSet:w,AddOwners:M},watch:{usersList:function(t){}},methods:{addNewNumber:function(){this.numbers.push({number:"998",id:Math.random()})},removeNumber:function(t){var e=this;this.numbers=this.numbers.filter((function(e){return e.id!==t.id})),this.$store.dispatch("deleteMerchantPhone",t.number).then((function(t){e.$message.success("Phone number deleted !")})).catch((function(t){}))},changeHandler:function(t,e,a,r){var n=t.target.value;if(n<r||n>a)return null;this.form.discount[e].discount=parseFloat(n.replace(",",".").replace(" ",""))},addNewDiscount:function(){N.a.set(this.form.discount,this.form.discount.length,{discount:0,month:0,id:Math.random()})},addNewMargin:function(){this.form.margin_list=[].concat(Object(i["a"])(this.form.margin_list),[{margin:0,month:0,id:Math.random()+"4d"}])},onPhoneNumber:function(t){var e=t||window.event,a=e.keyCode||e.which;a="paste"===e.type?event.clipboardData.getData("text/plain"):String.fromCharCode(a);var r=/[0-9]|\./;r.test(a)||(e.returnValue=!1,e.preventDefault&&e.preventDefault()),t.target.value.length>=12&&(e.returnValue=!1,e.preventDefault&&e.preventDefault())},beforeUpload:function(t){var e=["application/pdf","application/msword",".doc",".docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type);return e||this.$message.error("You can only upload file!"),e},uploadImage:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.uploadingImage=!0,r=new FormData,r.append("file",t.file),a.next=5,e.$getBase64(t.file);case 5:n=a.sent,e.$store.dispatch("uploadFile",r).then((function(t){e.fileList.push({uid:t.filename,name:t.filename,status:"done",url:n})})).catch((function(t){})).finally((function(){e.uploadingImage=!1}));case 7:case"end":return a.stop()}}),a)})))()},handleChange:function(t){var e=t.fileList;0===e.length&&(this.fileList=e)},handlePreview:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,e.$getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:r=document.createElement("a"),r.setAttribute("href",e.BASE_URL+t.img||t.url),r.setAttribute("download",t.name),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 11:case"end":return a.stop()}}),a)})))()},callback:function(){},checkPost:function(){var t=null;return this.$refs.ruleForm.validate((function(e){return e?(t=!0,!0):(t=!1,!1)})),t},postPhoneNumber:function(){var t=this,e=this.numbers.map((function(t){return t.number})),a={merchant_id:this.$route.params.id,phone_numbers:e};this.$store.dispatch("postNewMerchantPhone",a).then((function(e){t.$message.success("Phone number added successfully")})).catch((function(e){return t.$alertMessage(e.response.data.message)}))},postMerchantUsers:function(){var t=this;if(!1===this.checkPost())return-1;var e=Object(s["a"])({},this.form);e.contract.file_name=this.fileList[0]&&this.fileList[0].name,this.$store.dispatch("postMerchantUsers",e).then((function(e){t.$message.success("Merchant added successfully"),t.$router.go(-1)})).catch((function(e){t.$alertMessage(e.response.data.message)}))},getMerchantUser:function(t){var e=this;this.$store.dispatch("getMerchantPhones",t).then((function(t){e.numbers=t.phones.map((function(t,e){return{number:t,id:e}}))})).catch((function(t){})),this.$store.dispatch("getMerchantUser",t).then((function(t){e.formData=t.data,t.data.contract.file_name&&(e.fileList=[{uid:t.data.contract.file_name.split("/").pop(),url:a("9f06"),img:t.data.contract.file_name,status:"done",name:t.data.contract.file_name.split("/").pop()}])})).catch((function(t){e.$alertMessage(t.response.data.message)}))},updateMerchantUsers:function(){var t=this;if(!1===this.checkPost())return-1;var e=Object(s["a"])({},this.formData);this.$store.dispatch("updateMerchantUsers",e).then((function(e){t.$message.success("Merchant has updated successfully"),t.$router.go(-1)})).catch((function(e){t.$alertMessage("error",e.response.data.code,e.response.data.message,t)}))},cancelPost:function(){this.$router.go(-1)}},created:function(){this.$isEmptyObj(this.$route.params)?this.isNewForm=!0:this.getMerchantUser(this.$route.params.id)}},C=O,j=(a("90cc"),Object(p["a"])(C,r,n,!1,null,"f5389342",null));e["default"]=j.exports},cefa:function(t,e,a){},f599:function(t,e,a){"use strict";var r=function(t,e,a){9===e.length?a():a(new Error("Неверный ИНН"))};e["a"]={name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],phone_number:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"address.city":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"address.country":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],email:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"requisite.account_number":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"requisite.bank_name":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"requisite.inn":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"},{validator:r,trigger:"change"}],"requisite.legal_address":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"requisite.mfo_code":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"contract.started_at":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"contract.expired_at":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"contract.number":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],type_id:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}]}}}]);