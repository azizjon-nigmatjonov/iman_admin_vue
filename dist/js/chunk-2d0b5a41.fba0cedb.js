(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b5a41"],{"1a83":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-card",{staticClass:"mb-1",attrs:{size:"small"}},[s("a-breadcrumb",[s("a-breadcrumb-item",[s("a-button",{attrs:{icon:"left",size:"small",type:"link"},on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.$t("Назад")))])],1)],1)],1),s("a-card",{staticStyle:{width:"100%"}},[s("a-tabs",{attrs:{"default-active-key":"1","tab-position":"left",size:"large"}},[s("a-tab-pane",{key:"1"},[s("span",{attrs:{slot:"tab"},slot:"tab"},[s("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"profile"}}),e._v(" "+e._s(e.$t("change_data"))+" ")],1),e._v(" "+e._s(e.$t("change_data"))+" "),s("a-form-model",{ref:"ruleForm",staticStyle:{width:"50%"},attrs:{model:e.form,rules:e.rules}},[s("a-form-model-item",{attrs:{label:e.$t("name"),prop:"name"}},[s("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("a-form-model-item",{attrs:{label:e.$t("username"),prop:"username"}},[s("a-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),s("a-form-model-item",{attrs:{label:e.$t("phone"),prop:"phone"}},[s("a-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),s("a-button",{attrs:{"html-type":"submit",type:"primary",loading:e.loading},on:{click:e.updateDate}},[e._v(e._s(e.$t("update")))])],1)],1),s("a-tab-pane",{key:"2"},[s("span",{attrs:{slot:"tab"},slot:"tab"},[s("a-icon",{staticStyle:{"font-size":"22px"},attrs:{type:"safety"}}),e._v(" "+e._s(e.$t("change_password"))+" ")],1),s("a-row",{attrs:{gutter:[16,16]}},[s("a-col",{staticStyle:{margin:"5px 10px"},attrs:{span:20}},[s("label",[e._v(e._s(e.$t("old_password")))]),s("a-input",{attrs:{type:e.type,placeholder:e.$t("old_password")},model:{value:e.old_pass,callback:function(t){e.old_pass=t},expression:"old_pass"}})],1),s("a-col",{staticStyle:{margin:"5px 10px"},attrs:{span:20}},[s("label",[e._v(e._s(e.$t("new_password")))]),s("a-input",{attrs:{type:e.type,placeholder:e.$t("new_password")},model:{value:e.new_pass,callback:function(t){e.new_pass=t},expression:"new_pass"}},[s("a-tooltip",{attrs:{slot:"suffix",title:"Extra information"},slot:"suffix"},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"password"===e.type?"eye":"eye-invisible"},on:{click:e.showPass}})],1)],1)],1),s("a-col",{staticStyle:{margin:"5px 10px"},attrs:{span:20}},[s("label",[e._v(e._s(e.$t("new_password_confirm")))]),s("a-input",{attrs:{type:e.type,placeholder:e.$t("new_password_confirm")},model:{value:e.confirm_pass,callback:function(t){e.confirm_pass=t},expression:"confirm_pass"}})],1)],1),s("a-row",{staticStyle:{margin:"20px 0"}},[s("a-col",{attrs:{span:16}}),s("a-col",{attrs:{span:8}},[s("a-button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.changePass}},[e._v(" "+e._s(e.$t("change_password"))+" ")])],1)],1)],1)],1)],1)],1)},r=[],n=s("5530"),o=(s("ac1f"),s("d3b7"),s("b0c0"),s("5880")),i={components:{},data:function(){var e=this,t=function(t,s,a){/^[+][9][9][8]\d{9}$/.test(s)?a():a(new Error(e.$t("incorrectPhone")))};return{new_pass:null,confirm_pass:null,old_pass:null,loadingBtn:!1,type:"password",loading:!1,form:{name:"",phone:"",username:""},rules:{name:[{required:!0,message:"Name required",trigger:"blur"}],username:[{required:!0,message:"Username required",trigger:"blur"}],phone:[{required:!0,message:"Phone required",trigger:"change"},{validator:t,trigger:"change"}]}}},computed:function(){},mounted:function(){this.getSystemUserById()},methods:Object(n["a"])(Object(n["a"])({},Object(o["mapActions"])(["patchPassword","getSystemUser","updateSystemUser"])),{},{updateDate:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.loading=!0,e.updateSystemUser({id:JSON.parse(localStorage.getItem("user_id")),data:{name:e.form.name,phone:e.form.phone,username:e.form.username}}).then((function(t){e.$message.success(e.$t("successfullyUpdated")),location.reload(),e.$router.go(-1)})).catch((function(t){e.$message.error(t.message)})).finally((function(){e.loading=!1})))}))},resetForm:function(){this.$refs.ruleForm.resetFields()},changePass:function(){var e=this;null!=this.new_pass&&null!=this.confirm_pass&&this.new_pass===this.confirm_pass?(this.loadingBtn=!0,this.patchPassword({password:this.old_pass,new_password:this.new_pass}).then((function(t){e.loadingBtn=!1,e.$message.success(e.$t("successfullyUpdated")),e.$router.go(-1),e.new_pass=null,e.old_pass=null,e.confirm_pass=null,e.type="password"})).catch((function(t){e.loadingBtn=!1,e.$message.error(t.message)}))):this.$message.error(this.$t("error"))},getSystemUserById:function(){var e=this,t=JSON.parse(this.$store.state.Auth.userInfo);this.getSystemUser(t.id).then((function(t){e.form.name=t.name,e.form.phone=t.phone,e.form.username=t.username}))},showPass:function(){"password"===this.type?this.type="text":this.type="password"}})},l=i,p=s("2877"),c=Object(p["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports}}]);