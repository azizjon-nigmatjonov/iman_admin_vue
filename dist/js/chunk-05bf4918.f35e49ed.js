(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05bf4918"],{"707b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-tag",{staticClass:"mx-1",staticStyle:{cursor:"pointer",width:"24px",height:"24px",display:"inline-flex","align-items":"center","justify-content":"center"},attrs:{color:"geekblue"},on:{click:function(e){return t.$emit("click")}}},["up"===t.type?n("a-icon",{attrs:{type:"caret-up"}}):n("a-icon",{attrs:{type:"caret-down"}})],1)},a=[],s={model:{prop:"value",event:"click"},props:{click:{type:Function,required:!1,default:function(){}},type:{type:String,default:"up"}}},r=s,o=n("2877"),c=Object(o["a"])(r,i,a,!1,null,"0c795e2c",null);e["a"]=c.exports},f632:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-navigation",{attrs:{list:[{name:t.$t("Categories"),link:"/advices/categories"},{name:t.$t("Subcategories"),link:""}],isBack:{flag:!0,return:!0},noBorder:""}},[n("div",{staticStyle:{float:"right"}},[t.saveButtonVisible?n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:t.saveButtonLoading},on:{click:t.saveOrder}},[t._v(t._s(t.$t("button.saveOrder")))]):t._e(),n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/advices/categories/"+t.$route.params.categoryId+"/subcategories/new")}}},[t._v(t._s(t.$t("button.create")))])],1)]),n("a-card",{staticClass:"no-space-tab"},[n("a-card",[n("a-table",{attrs:{columns:t.columns,"data-source":t.subcategories,"row-key":function(t){return t.guid},size:"middle",pagination:t.pagination,loading:t.loading,bordered:""},on:{change:t.getPagination},scopedSlots:t._u([{key:"index",fn:function(e,i,a){return n("span",{},[t._v(" "+t._s(10*(t.pagination.current-1)+a+1)+" ")])}},{key:"actions",fn:function(e){return n("span",{},[n("arrow-btn",{attrs:{type:"up"},on:{click:function(n){return t.upButtonHandler(e)}}}),n("arrow-btn",{attrs:{type:"down"},on:{click:function(n){return t.downButtonHandler(e)}}}),n("edit-btn",{on:{click:function(n){return t.$router.push({name:"advices-subcategories-edit",params:{id:e.guid,categoryId:t.$route.params.categoryId}})}}}),n("delete-btn",{on:{confirm:function(n){return t.deleteSubCategory(e)}}})],1)}}])})],1)],1)],1)},a=[],s=n("5530"),r=(n("c740"),n("d81d"),n("d3b7"),n("99af"),n("707b")),o={components:{arrowBtn:r["a"]},data:function(){return{subcategories:[],loading:!1,saveButtonVisible:!1,saveButtonLoading:!1,pagination:{current:1,showQuickJumper:!0},columns:[{title:"â„–",key:"index",width:70,scopedSlots:{customRender:"index"},customCell:this.onRowClick},{title:this.$t("name"),key:"name",dataIndex:"title.ru",customCell:this.onRowClick},{title:this.$t("investors.table.actions"),scopedSlots:{customRender:"actions"},key:"actions",width:200,fixed:"right"}]}},methods:{upButtonHandler:function(t){var e=this.subcategories.findIndex((function(e){return e.guid===t.guid}));if(0===e)return null;var n=JSON.parse(JSON.stringify(this.subcategories));n[e]=n[e-1],n[e-1]=t,this.subcategories=n,this.saveButtonVisible=!0},downButtonHandler:function(t){var e=this.subcategories.findIndex((function(e){return e.guid===t.guid})),n=this.subcategories.length;if(e===n-1)return null;var i=JSON.parse(JSON.stringify(this.subcategories));i[e]=i[e+1],i[e+1]=t,this.subcategories=i,this.saveButtonVisible=!0},saveOrder:function(){var t=this,e=this.subcategories.map((function(t,e){return{guid:t.guid,position:e}}));this.saveButtonLoading=!0,this.$store.dispatch("updateSubcategoriesOrder",e).then((function(e){t.$alertMessage("success","Message","Updated successfully updated",t),t.saveButtonVisible=!1})).finally((function(){t.saveButtonLoading=!1}))},onRowClick:function(t,e){var n=this;return{on:{click:function(e){n.$router.push("/advices/categories/".concat(n.$route.params.categoryId,"/subcategories/").concat(t.guid,"/list"))}}}},getPagination:function(t){var e={page:t.current,limit:10};this.pagination.current=t.current,this.getSubcategories(e)},getSubcategories:function(t){var e=this;this.loading=!0,this.$store.dispatch("getAdviceSubcategories",{categoryId:this.$route.params.categoryId,params:t}).then((function(t){e.subcategories=t.categories_list;var n=Object(s["a"])({},e.pagination);n.total=t.count,e.pagination=n,e.loading=!1})).catch((function(t){e.$alertMessage(t.response.data.message),e.loading=!1}))},deleteSubCategory:function(t){var e=this;this.$store.dispatch("deleteAdviceSubcategories",t.guid).then((function(t){e.$alertMessage("success","Deleted","Deleted successfully",e);var n={page:e.pagination.current,limit:10};e.getSubcategories(n)})).catch((function(t){t.response.data&&e.$alertMessage(t.response.data.message)}))},getList:function(){var t={page:this.pagination.current,limit:10};this.getSubcategories(t)}},created:function(){this.getList()}},c=o,u=n("2877"),l=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=l.exports}}]);