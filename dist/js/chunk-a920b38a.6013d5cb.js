(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a920b38a","chunk-7b5efa08"],{"0885":function(t,e,a){},"21c9":function(t,e,a){"use strict";a("5557")},"28da":function(t,e,a){"use strict";var n=a("1098"),s=a.n(n),o=a("6042"),r=a.n(o),i=a("41b2"),c=a.n(i),u=a("d4b2"),l=a("a615"),h=a("9839"),p=a("b558"),m=a("b24f"),f=a.n(m),d=a("4d91"),g=a("7b05"),b=a("daa3");function v(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];for(var s=0;s<e.length;s++)e[s]&&"function"===typeof e[s]&&e[s].apply(this,a)}}var _={name:"InputElement",inheritAttrs:!1,props:{value:d["a"].any,disabled:d["a"].bool,placeholder:d["a"].string},render:function(){var t=this.$slots,e=void 0===t?{}:t,a=this.$attrs,n=void 0===a?{}:a,s=this.placeholder,o=Object(b["k"])(this),r=Object(b["l"])(this),i=void 0===r.value?"":r.value,u=e["default"][0],l=e["default"][0].componentOptions,h=void 0===l?{}:l,p=h.listeners,m=void 0===p?{}:p,d=c()({},m),_=!0,$=!1,y=void 0;try{for(var w,k=Object.entries(o)[Symbol.iterator]();!(_=(w=k.next()).done);_=!0){var A=w.value,P=f()(A,2),O=P[0],x=P[1];d[O]=v(x,m[O])}}catch(j){$=!0,y=j}finally{try{!_&&k["return"]&&k["return"]()}finally{if($)throw y}}var C=c()({},n,{value:i});return delete r.placeholder,s&&(r.placeholder=s,C.placeholder=s),Object(g["a"])(u,{domProps:{value:i},props:r,on:d,attrs:C,ref:"ele"})}},$=a("9cba"),y=a("db14"),w=c()({},Object(h["a"])(),{value:h["c"],defaultValue:h["c"],dataSource:d["a"].array,dropdownMenuStyle:d["a"].object,optionLabelProp:String,dropdownMatchSelectWidth:d["a"].bool}),k={name:"AAutoComplete",props:c()({},w,{prefixCls:d["a"].string,showSearch:d["a"].bool.def(!1),transitionName:d["a"].string.def("slide-up"),choiceTransitionName:d["a"].string.def("zoom"),autoFocus:d["a"].bool,backfill:d["a"].bool,optionLabelProp:d["a"].string.def("children"),filterOption:d["a"].oneOfType([d["a"].bool,d["a"].func]).def(!1),defaultActiveFirstOption:d["a"].bool.def(!0)}),Option:c()({},u["a"],{name:"AAutoCompleteOption"}),OptGroup:c()({},l["a"],{name:"AAutoCompleteOptGroup"}),model:{prop:"value",event:"change"},inject:{configProvider:{default:function(){return $["a"]}}},provide:function(){return{savePopupRef:this.savePopupRef}},methods:{savePopupRef:function(t){this.popupRef=t},getInputElement:function(){var t=this.$createElement,e=this.$slots,a=this.placeholder,n=Object(b["c"])(e["default"]),s=n.length?n[0]:t(p["a"],{attrs:{lazy:!1}});return t(_,{attrs:{placeholder:a}},[s])},focus:function(){this.$refs.select&&this.$refs.select.focus()},blur:function(){this.$refs.select&&this.$refs.select.blur()}},render:function(){var t,e=arguments[0],a=this.size,n=this.prefixCls,o=this.optionLabelProp,i=this.dataSource,l=this.$slots,p=this.configProvider.getPrefixCls,m=p("select",n),f=(t={},r()(t,m+"-lg","large"===a),r()(t,m+"-sm","small"===a),r()(t,m+"-show-search",!0),r()(t,m+"-auto-complete",!0),t),d=void 0,g=Object(b["c"])(l.dataSource);d=g.length?g:i?i.map((function(t){if(Object(b["w"])(t))return t;switch("undefined"===typeof t?"undefined":s()(t)){case"string":return e(u["a"],{key:t},[t]);case"object":return e(u["a"],{key:t.value},[t.text]);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}})):[];var v={props:c()({},Object(b["l"])(this),{mode:h["d"].SECRET_COMBOBOX_MODE_DO_NOT_USE,optionLabelProp:o,getInputElement:this.getInputElement,notFoundContent:Object(b["g"])(this,"notFoundContent"),placeholder:""}),class:f,ref:"select",on:Object(b["k"])(this)};return e(h["d"],v,[d])},install:function(t){t.use(y["a"]),t.component(k.name,k),t.component(k.Option.name,k.Option),t.component(k.OptGroup.name,k.OptGroup)}};e["a"]=k},4955:function(t,e,a){"use strict";a("b2a3"),a("dc88"),a("2ef0"),a("5704")},5557:function(t,e,a){},"6e7a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",{staticClass:"mb-2",attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.onChange()}}},[t._v(t._s(t.$t("button.create")))])],1)],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.accounts,"row-key":function(t){return t.id}},scopedSlots:t._u([{key:"status",fn:function(e){return a("span",{},[a("a-tag",{attrs:{color:t.getStatusColor(e.is_active)}},[t._v(t._s(e.is_active?t.$t("active"):t.$t("inactive")))])],1)}},{key:"actions",fn:function(e){return a("span",{staticClass:"span"},[a("delete-btn",{on:{confirm:function(a){return t.deletePosAgentsAccount(e)}}}),a("a-popconfirm",{attrs:{title:"Вы хотите заблокировать?","ok-text":"Да","cancel-text":"Нет"},on:{confirm:function(a){return t.updatePosAgentsAcount(e)},cancel:function(t){return null}}},[a("icon-btn",{attrs:{icon:"lock",title:t.$t("button.preview")}})],1)],1)}}])}),this.accounts?a("a-modal",{attrs:{title:t.$t("добавить аккаунт"),"on-ok":"handleOk"},on:{ok:t.postPosAgentsAccount,cancel:t.handleCancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[[a("a-form-model",{attrs:{colon:!1,model:t.account}},[a("a-col",{staticStyle:{padding:"0 15px"}},[a("a-form-model-item",{attrs:{label:t.$t("posAgent_number"),prop:"posAgent_number"}},[a("a-input",{attrs:{type:"number"},on:{keypress:function(e){return t.isNumber(e)},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.preventDefault()}},model:{value:t.account.phone_number,callback:function(e){t.$set(t.account,"phone_number",e)},expression:"account.phone_number"}})],1)],1)],1)]],2):t._e()],1)},s=[],o=a("5530"),r=(a("a434"),a("c740"),{data:function(){return{visible:!1,account:{phone_number:""},columns:[{title:this.$t("phone_number"),dataIndex:"phone_number",key:"phone_number"},{title:this.$t("Status"),scopedSlots:{customRender:"status"},key:"status"},{title:this.$t("category.table.Actions"),scopedSlots:{customRender:"actions"},key:"actions",width:150}],pos_agents:{},accounts:[]}},methods:{isNumber:function(t){var e;t=null!==(e=t)&&void 0!==e?e:window.event;var a=t.which?t.which:t.keyCode;if(!(a>31&&(a<48||a>57)&&46!==a))return!0;t.preventDefault()},handleCancel:function(t){this.visible=!1},onChange:function(){this.visible=!0},getStatusColor:function(t){var e;switch(t){case!0:e="green";break;case!1:e="red";break;default:e="brown"}return e},onChange1:function(){this.account.is_active?this.account.is_active=!1:this.account.is_active=!0},postPosAgentsAccount:function(){var t=this,e={id:this.$route.params.id,data:{phone_number:this.account.phone_number}};this.$store.dispatch("postPosAgentsAccount",e).then((function(e){t.accounts.push({is_active:!0,phone_number:t.account.phone_number}),t.$message.success("Pos agent  added successfully"),t.visible=!1})).catch((function(e){t.$message.error(e.response.data.message)}))},getPosAgent:function(t){var e=this;this.$store.dispatch("getPosAgent",this.$route.params.id).then((function(t){e.pos_agent=t.pos_agent,e.accounts=t.pos_agent.accounts})).catch((function(t){e.$alertMessage(t.response.data.message)}))},deletePosAgentsAccount:function(t){var e=this,a={id:this.$route.params.id,data:t};this.$store.dispatch("deletePosAgentsAccount",a).then((function(a){e.pos_agent.accounts.splice(e.pos_agent.accounts.findIndex((function(e){return e.phone_number===t.phone_number})),1),e.$message.success(" Pos agent account deleted successfully")})).catch((function(t){e.$alertMessage(t.response.data.message)}))},updatePosAgentsAcount:function(t){var e=this;!0===this.is_active?this.is_active=!1:this.is_active=!0;var a={id:this.$route.params.id,data:Object(o["a"])(Object(o["a"])({},t),{},{is_active:this.is_active})};this.$store.dispatch("updatePosAgentsAcount",a).then((function(t){e.$message.success("Account has updated successfully")})).catch((function(t){e.$alertMessage(t.response.data.message)}))}},created:function(t){this.getPosAgent(t)}}),i=r,c=(a("8991"),a("2877")),u=Object(c["a"])(i,n,s,!1,null,null,null);e["default"]=u.exports},7143:function(t,e,a){"use strict";var n=a("1da1"),s=(a("96cf"),a("d3b7"),{data:function(){return{fileList:[],previewImage:"",previewVisible:!1,uploadingImage:!1}},methods:{uploadImage:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.uploadingImage=!0,n=new FormData,n.append("file",t.file),a.next=5,e.$getBase64(t.file);case 5:s=a.sent,e.$store.dispatch("uploadImage",n).then((function(t){e.fileList.push({uid:t.filename,name:t.filename,status:"done",url:s})})).catch((function(t){})).finally((function(){e.uploadingImage=!1}));case 7:case"end":return a.stop()}}),a)})))()},handleChange:function(t){var e=t.fileList;0===e.length&&(this.fileList=e)},handlePreview:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,e.$getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()}}});e["a"]=s},8991:function(t,e,a){"use strict";a("0885")},a3f0:function(t,e,a){"use strict";e["a"]={first_name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],last_name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],merchant_branches1:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],patronymic:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],phone_number:[{required:!0,message:"Пожалуйста, введите",trigger:"change"}],merchant_branches:[{required:!0,type:"array",message:"Пожалуйста, введите",trigger:"blur"}]}},a56b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-navigation",{attrs:{list:[{name:t.$t("Список Пос агенты"),link:"/PosaAgents/list"},{name:t.$t("Форма Пос агенты"),link:""}],isBack:{flag:!0,link:"/posAgents/list"},noBorder:""}}),a("a-card",{staticClass:"no-space-tab"},[a("a-tabs",{on:{change:t.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:t.$t("main")}},[a("a-card",[a("a-form-model",{ref:"ruleForm",attrs:{colon:!1,model:t.form,rules:t.rules}},[a("a-row",{staticClass:"form-row",attrs:{gutter:16}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:t.$t("First_name"),prop:"first_name"}},[a("a-input",{attrs:{placeholder:t.$t("first_name")},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:t.$t("Last_name"),prop:"last_name"}},[a("a-input",{attrs:{placeholder:t.$t("last_name")},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:t.$t("patronymic"),prop:"patronymic"}},[a("a-input",{attrs:{placeholder:t.$t("patronymic")},model:{value:t.form.patronymic,callback:function(e){t.$set(t.form,"patronymic",e)},expression:"form.patronymic"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:t.$t("merchant_branches"),prop:"merchant_branches"}},[a("auto-complete",{staticStyle:{width:"100%"},attrs:{value:t.form.merchant_branches[0],"data-source":t.computedMerchantBranch},on:{search:t.searchBranch},model:{value:t.form.merchant_branches[0],callback:function(e){t.$set(t.form.merchant_branches,0,e)},expression:"form.merchant_branches[0]"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:t.$t("Image upload")}},[a("a-upload",{attrs:{customRequest:t.uploadImage,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<1?a("div",[a("a-icon",{attrs:{type:t.uploadingImage?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.$t("button.upload")))])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:function(e){t.previewVisible=!1}}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:t.previewImage,src:t.previewImage}})])],1)],1)],1),a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{staticStyle:{"margin-right":"6px"},attrs:{type:"grey"},on:{click:t.cancelPost}},[t._v(t._s(t.$t("button.cancel")))]),t.isNewForm?a("a-button",{attrs:{type:"primary"},on:{click:t.postPosAgents}},[t._v(t._s(t.$t("button.create")))]):a("a-button",{attrs:{type:"primary"},on:{click:t.updatePosAgents}},[t._v(t._s(t.$t("button.save")))])],1)],1)],1)],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:t.$t("phoneNumbers")}},[a("a-card",[a("index")],1)],1)],1)],1)],1)},s=[],o=a("5530"),r=(a("4955"),a("28da")),i=(a("ac1f"),a("1276"),a("d81d"),a("99af"),a("b0c0"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("a3f0")),c=a("6e7a"),u=a("7143"),l={mixins:[u["a"]],data:function(){return{merchant_branch:[],isNewForm:!1,visible:!1,searchText:"",form:{first_name:"",last_name:"",photo:"",patronymic:"",merchant_branches:[],accounts:[{phone_number:"",is_active:!0}]},rules:i["a"]}},components:{index:c["default"],AutoComplete:r["a"]},watch:{"form.merchant_branches":function(t){}},methods:{visible1:function(){this.visible=!0},stop:function(){this.visible=!1},callback:function(){},dust:function(){return{first_name:this.form.first_name,last_name:this.form.last_name,patronymic:this.form.patronymic,merchant_branches:this.form.merchant_branches,photo:this.fileList.length?this.fileList[0].uid:this.form.photo}},dust1:function(){return{first_name:this.form.first_name,last_name:this.form.last_name,merchant_branches:this.form.merchant_branches,patronymic:this.form.patronymic,photo:this.fileList.length?this.fileList[0].uid:this.form.photo,guid:this.form.guid,accounts:[{phone_number:this.form.accounts.phone_number,is_active:!0}]}},searchBranch:function(t){this.searchText=t},branchSelectHandler:function(t){this.form.merchant_branches=[t]},checkPost:function(){var t=null;return this.$refs.ruleForm.validate((function(e){return e?(t=!0,!0):(t=!1,!1)})),t},postPosAgents:function(){var t=this;if(!1===this.checkPost())return-1;this.$store.dispatch("postPosAgents",this.dust()).then((function(e){t.$message.success("Pos agent  added successfully"),t.$router.go(-1)})).catch((function(e){t.$alertMessage(e.response.data.message)}))},getPosAgent:function(t){var e=this;this.$store.dispatch("getPosAgent",this.$route.params.id).then((function(t){var a;e.fileList=[{uid:t.pos_agent.photo.split("/").pop(),url:t.pos_agent.photo,status:"done",name:t.pos_agent.photo}],e.form=Object(o["a"])(Object(o["a"])({},t.pos_agent),{},{merchant_branches:[null===(a=t.pos_agent.merchant_branches[0])||void 0===a?void 0:a.guid],accounts:t.pos_agent.accounts[0]})})).catch((function(t){e.$alertMessage(t.response.data.message)}))},getBranches:function(){var t=this;this.$store.dispatch("getBranches").then((function(e){t.merchant_branch=e.merchant_branches.map((function(t){return{value:t.guid,text:"".concat(t.merchant_name," / ").concat(t.name)}}))})).catch((function(e){t.$alertMessage(e.response.data.message)}))},updatePosAgents:function(){var t=this;if(!1===this.checkPost())return-1;this.$store.dispatch("updatePosAgents",this.dust1()).then((function(e){t.$message.success("Pos agents has updated successfully"),t.$router.go(-1)})).catch((function(e){t.$message.error(e.message)}))},cancelPost:function(){this.$router.go(-1)}},computed:{computedMerchantBranch:function(){var t=this;return this.merchant_branch.filter((function(e){return e.text.toLowerCase().includes(t.searchText)}))}},created:function(){this.$isEmptyObj(this.$route.params)?this.isNewForm=!0:this.getPosAgent(this.$route.params.id),this.getBranches()}},h=l,p=(a("21c9"),a("2877")),m=Object(p["a"])(h,n,s,!1,null,"6e18260c",null);e["default"]=m.exports},dc88:function(t,e,a){}}]);