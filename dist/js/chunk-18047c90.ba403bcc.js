(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18047c90"],{"37f4":function(e,t,a){"use strict";a("f4f4")},c0d6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-navigation",{attrs:{list:[{name:e.$t("Список продавцов"),link:"/merchants/list"},{name:e.$t("Форма продавца"),link:""}],isBack:{flag:!0,link:"/merchants/list"}}}),a("a-card",[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{span:22,offset:1}},[a("a-form-model",{ref:"ruleForm",attrs:{colon:!1,rules:e.rules,model:e.form}},[a("a-row",{staticClass:"form-row",attrs:{gutter:16}},[a("a-divider",{staticClass:"div",attrs:{orientation:"left"}},[e._v(e._s(e.$t("Информация о торговце")))]),a("a-col",{attrs:{span:24,md:8}},[a("a-form-model-item",{ref:"name",attrs:{label:e.$t("name"),prop:"name"}},[a("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Email"),prop:"email"}},[a("a-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Phone number"),prop:"phone_number"}},[a("a-input",{on:{keypress:e.onPhoneNumber},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Adress"),prop:"address"}},[a("a-input",{model:{value:e.form.address.title,callback:function(t){e.$set(e.form.address,"title",t)},expression:"form.address.title"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Country"),prop:"country"}},[a("a-input",{model:{value:e.form.address.country,callback:function(t){e.$set(e.form.address,"country",t)},expression:"form.address.country"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("City"),prop:"city"}},[a("a-input",{model:{value:e.form.address.city,callback:function(t){e.$set(e.form.address,"city",t)},expression:"form.address.city"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{ref:"type_id",attrs:{label:e.$t("merchant.type"),prop:"type_id"}},[a("a-select",{attrs:{placeholder:e.$t("status")},model:{value:e.form.type_id,callback:function(t){e.$set(e.form,"type_id",t)},expression:"form.type_id"}},e._l(e.merchantTypeOptions,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),1)],1)],1),a("a-divider",{staticClass:"div",attrs:{orientation:"left"}},[e._v(e._s(e.$t("Реквизит")))]),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Bank name"),prop:"requisite.bank_name"}},[a("a-input",{model:{value:e.form.requisite.bank_name,callback:function(t){e.$set(e.form.requisite,"bank_name",t)},expression:"form.requisite.bank_name"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Account number"),prop:"requisite.account_number"}},[a("a-input",{attrs:{type:"number"},model:{value:e.form.requisite.account_number,callback:function(t){e.$set(e.form.requisite,"account_number",t)},expression:"form.requisite.account_number"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Legal adress"),prop:"requisite.legal_address"}},[a("a-input",{model:{value:e.form.requisite.legal_address,callback:function(t){e.$set(e.form.requisite,"legal_address",t)},expression:"form.requisite.legal_address"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Inn"),prop:"requisite.inn"}},[a("a-input",{attrs:{type:"number"},model:{value:e.form.requisite.inn,callback:function(t){e.$set(e.form.requisite,"inn",t)},expression:"form.requisite.inn"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Mfo code"),prop:"requisite.mfo_code"}},[a("a-input",{model:{value:e.form.requisite.mfo_code,callback:function(t){e.$set(e.form.requisite,"mfo_code",t)},expression:"form.requisite.mfo_code"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{ref:"requisite.has_nds",attrs:{label:e.$t("hasVAT")}},[a("a-switch",{model:{value:e.form.has_nds,callback:function(t){e.$set(e.form,"has_nds",t)},expression:"form.has_nds"}})],1)],1),a("a-divider",{staticClass:"div",attrs:{orientation:"left"}},[e._v(e._s(e.$t("Договор")))]),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("Image upload")}},[a("a-upload",{attrs:{customRequest:e.uploadImage,"list-type":"picture-card","file-list":e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a("div",[a("a-icon",{attrs:{type:e.uploadingImage?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.$t("button.upload")))])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:function(t){e.previewVisible=!1}}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:e.previewImage,src:e.previewImage}})])],1)],1),a("a-col",{staticClass:"mx",attrs:{md:6}},[a("a-form-model-item",{attrs:{label:e.$t("date1"),prop:"contract.date"}},[a("a-date-picker",{attrs:{format:e.$dateFormat},model:{value:e.form.contract.date,callback:function(t){e.$set(e.form.contract,"date",t)},expression:"form.contract.date"}})],1)],1),a("a-col",{staticClass:"mx",attrs:{md:6}},[a("a-form-model-item",{attrs:{label:e.$t("expire_date"),prop:"contract.expire_date"}},[a("a-date-picker",{attrs:{format:e.$dateFormat},model:{value:e.form.contract.expire_date,callback:function(t){e.$set(e.form.contract,"expire_date",t)},expression:"form.contract.expire_date"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-model-item",{attrs:{label:e.$t("number"),prop:"contract.number"}},[a("a-input",{model:{value:e.form.contract.number,callback:function(t){e.$set(e.form.contract,"number",t)},expression:"form.contract.number"}})],1)],1),a("a-col",{staticClass:"mx",attrs:{md:16,offset:"8"}}),a("a-col",{attrs:{span:"24"}},[a("a-form-model-item",{attrs:{label:" "}},[a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:"auto"}},[a("a-button",{staticClass:"mx-1",attrs:{type:"grey"},on:{click:e.cancelPost}},[e._v(e._s(e.$t("button.cancel")))]),e.isNewForm?a("a-button",{attrs:{type:"primary"},on:{click:e.postMerchantUsers}},[e._v(e._s(e.$t("button.create")))]):a("a-button",{attrs:{type:"primary"},on:{click:e.updateMerchantUsers}},[e._v(e._s(e.$t("button.save")))])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},s=[],n=a("1da1"),i=(a("96cf"),a("caad"),a("d3b7"),a("b0c0"),a("ac1f"),a("f599")),o={data:function(){return{fileList:[],previewImage:"",previewVisible:!1,uploadingImage:!1,rules:i["a"],isNewForm:!1,merchantTypeOptions:[],form:{email:"",name:"",phone_number:"",has_nds:!0,address:{city:"",country:"",title:""},requisite:{inn:"",mfo_code:"",bank_name:"",legal_address:"",account_number:""},contract:{expired_at:"",file_name:"",number:"",started_at:""},type_id:null}}},methods:{postMerchantUsers:function(){var e=this;if(!1===this.checkPost())return-1;this.$store.dispatch("postMerchantUsers",this.form).then((function(t){e.$message.success("Merchant added successfully"),e.$router.go(-1)})).catch((function(t){e.$alertMessage("error",t.response.data.code,t.response.data.message,e)}))},beforeUpload:function(e){var t=["application/pdf","application/msword"].includes(e.type);t||this.$message.error("You can only upload file!");var a=e.size/1024/1024<2;return a||this.$message.error("File must smaller than 2MB!"),t&&a},uploadImage:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.uploadingImage=!0,r=new FormData,r.append("file",e.file),a.next=5,t.$getBase64(e.file);case 5:s=a.sent,t.$store.dispatch("uploadFile",r).then((function(e){t.fileList.push({uid:e.filename,name:e.filename,status:"done",url:s})})).catch((function(e){})).finally((function(){t.uploadingImage=!1}));case 7:case"end":return a.stop()}}),a)})))()},handleChange:function(e){var t=e.fileList;0===t.length&&(this.form.contract.file_name=t[0].uid,this.fileList=t)},handlePreview:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,t.$getBase64(e.originFileObj);case 3:e.preview=a.sent;case 4:r=document.createElement("a"),r.setAttribute("href",e.img||e.url),r.setAttribute("download",e.name),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 11:case"end":return a.stop()}}),a)})))()},onPhoneNumber:function(e){var t=e||window.event,a=t.keyCode||t.which;a="paste"===t.type?event.clipboardData.getData("text/plain"):String.fromCharCode(a);var r=/[0-9]|\./;r.test(a)||(t.returnValue=!1,t.preventDefault&&t.preventDefault()),e.target.value.length>=12&&(t.returnValue=!1,t.preventDefault&&t.preventDefault())},callback:function(){},checkPost:function(){var e=null;return this.$refs.ruleForm.validate((function(t){return t?(e=!0,!0):(e=!1,!1)})),e},getMerchantUser:function(e){var t=this;this.$store.dispatch("getMerchantUser",e).then((function(e){})).catch((function(e){t.$alertMessage(e.response.data.message)}))},getMerchanTypes:function(){var e=this;this.$store.dispatch("getMerchanTypes").then((function(t){e.merchantTypeOptions=t.list})).catch((function(t){e.$alertMessage(t.response.data.message)}))},updateMerchantUsers:function(){var e=this;if(!1===this.checkPost())return-1;this.$store.dispatch("updateMerchantUsers",this.form).then((function(t){e.$message.success("Merchant has updated successfully"),e.$router.go(-1)})).catch((function(t){e.$alertMessage(t.response.data.message)}))},cancelPost:function(){this.$router.go(-1)}},created:function(){this.$isEmptyObj(this.$route.params)?this.isNewForm=!0:this.getMerchantUser(this.$route.params.id),this.getMerchanTypes()}},l=o,c=(a("37f4"),a("2877")),m=Object(c["a"])(l,r,s,!1,null,"cf856e14",null);t["default"]=m.exports},f4f4:function(e,t,a){},f599:function(e,t,a){"use strict";var r=function(e,t,a){9===t.length?a():a(new Error("Неверный ИНН"))};t["a"]={name:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],phone_number:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"address.city":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"address.country":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],email:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"requisite.account_number":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"requisite.bank_name":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"requisite.inn":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"},{validator:r,trigger:"change"}],"requisite.legal_address":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"requisite.mfo_code":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"contract.started_at":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"contract.expired_at":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],"contract.number":[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}],type_id:[{required:!0,message:"Пожалуйста, введите",trigger:"blur"}]}}}]);