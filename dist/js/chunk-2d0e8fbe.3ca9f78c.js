(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8fbe"],{"8c30":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-navigation",{attrs:{list:[{name:t.$t("Stories"),link:""}],isBack:{flag:!1,link:"/stories/list"},noBorder:""}},[n("a-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/stories/list/new")}}},[t._v(t._s(t.$t("button.create")))])],1),n("a-card",{staticClass:"no-space-tab"},[n("a-card",[n("a-table",{attrs:{columns:t.columns,"data-source":t.stories,"row-key":function(t){return t.claim_id},size:"middle",pagination:t.pagination,loading:t.loading,bordered:""},on:{change:t.getPagination},scopedSlots:t._u([{key:"payment_type",fn:function(e){return n("span",{},[t._v(" "+t._s(t.$t(e))+" ")])}},{key:"type",fn:function(e){return n("span",{},[t._v(" "+t._s(t.$t(e.type))+" ")])}},{key:"created_at",fn:function(e){return n("span",{},[t._v(" "+t._s(t._f("moment")(e.created_at,t.$dateTimeFormat))+" ")])}},{key:"amount",fn:function(e){return n("span",{},[t._v(" "+t._s(t.$moneyFormat(+e.data.amount))+" ")])}},{key:"index",fn:function(e,s,a){return n("span",{},[t._v(" "+t._s(10*(t.pagination.current-1)+a+1)+" ")])}},{key:"residency",fn:function(e){return n("span",{},[t._v(" "+t._s(e?"Резидент":"Нерезидент")+" ")])}},{key:"fullname",fn:function(e,s){return n("span",{},[t._v(" "+t._s((s.investor&&s.investor.passport_data&&s.investor.passport_data.first_name||"")+" "+(s.investor&&s.investor.passport_data&&s.investor.passport_data.last_name||""))+" ")])}},{key:"birth_day",fn:function(e){return n("span",{},[t._v(" "+t._s(t._f("moment")(e.birth_day,t.$dateTimeFormat))+" ")])}},{key:"status",fn:function(e){return n("span",{},[n("a-tag",{attrs:{color:t.getStatusColor(e.status)}},[t._v(t._s(t.$t(e.status)))])],1)}},{key:"actions",fn:function(e){return n("span",{},[n("delete-btn",{on:{confirm:function(n){return t.deleteStories(e)}}})],1)}}])})],1)],1)],1)},a=[],i=n("5530"),o={watch:{$route:{handler:function(){this.getStories()},deep:!0}},data:function(){return{form:{date:void 0},rules:{date:[{required:!0,message:"Пожалуйста, введите дату",trigger:"change"}]},downloading:!1,search_args:"",type:"cash_in",typeList:[{title:"moneyInput",key:"cash_in"},{title:"moneyWWithdrawal",key:"cash_out"}],stories:[],statusList:[],visible:!1,loading:!1,passport_data:{},selectedInvestors:null,pagination:{current:1,showQuickJumper:!0},status:void 0,columns:[{title:"№",key:"index",scopedSlots:{customRender:"index"},customCell:this.onRowClick},{title:this.$t("created_at"),key:"created_at",scopedSlots:{customRender:"created_at"},customCell:this.onRowClick},{title:this.$t("table.title"),key:"title",dataIndex:"title.".concat(this.$t("lang")),customCell:this.onRowClick},{title:this.$t("username"),key:"username",dataIndex:"user.username",customCell:this.onRowClick},{title:this.$t("investors.table.actions"),scopedSlots:{customRender:"actions"},key:"actions",width:100,fixed:"right"}]}},methods:{onRowClick:function(t,e){var n=this;return{on:{click:function(e){n.$router.push("/stories/list/new?id=".concat(t.guid))}}}},getPagination:function(t){var e={page:t.current,limit:10};this.pagination.current=t.current,this.getStories(e)},getStories:function(t){var e=this;this.loading=!0,this.$store.dispatch("getStories",t).then((function(t){e.stories=t.stories;var n=Object(i["a"])({},e.pagination);n.total=t.count,e.pagination=n,e.loading=!1})).catch((function(t){e.$alertMessage(t.response.data.message),e.loading=!1}))},deleteStories:function(t){var e=this;this.$store.dispatch("deleteStories",t.guid).then((function(t){e.$alertMessage("success","Deleted","Investor has deleted successfully",e);var n={page:e.pagination.current,limit:10};e.getStories(n)})).catch((function(t){t.response.data&&e.$alertMessage(t.response.data.message)}))},getList:function(){var t={page:this.pagination.current,limit:10};this.getStories(t)}},created:function(){this.getList()}},r=o,c=n("2877"),u=Object(c["a"])(r,s,a,!1,null,null,null);e["default"]=u.exports}}]);