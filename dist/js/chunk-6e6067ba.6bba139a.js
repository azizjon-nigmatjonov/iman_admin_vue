(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e6067ba"],{"0dbdf":function(t,e,n){},9338:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-navigation",{attrs:{list:[],isBack:{flag:!0,link:"/merchants/list"}}}),n("a-card",[n("a-tabs",{attrs:{type:"card"},on:{change:t.callback}},[n("a-tab-pane",{key:"1",attrs:{tab:t.$t("Список филиал")}},[n("a-row",{staticClass:"mb-2",attrs:{type:"flex",justify:"end"}},[n("a-col",{attrs:{span:"auto"}},[n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"new-branch",params:{id:t.$route.params.id}})}}},[t._v(t._s(t.$t("button.create")))])],1)],1),n("a-table",{attrs:{columns:t.columns,"data-source":t.merchant_branches,loading:t.loading,"row-key":function(t){return t.guid}},scopedSlots:t._u([{key:"created_at",fn:function(e){return n("span",{},[t._v(" "+t._s(t._f("moment")(e.created_at,t.$dateFormat)))])}},{key:"updated_at",fn:function(e){return n("span",{},[t._v(" "+t._s(t._f("moment")(e.updated_at,t.$dateFormat)))])}},{key:"actions",fn:function(e){return n("span",{staticClass:"span"},[n("delete-btn",{on:{confirm:function(n){return t.deleteBranch(e)}}}),n("edit-btn",{on:{click:function(n){return t.$router.push("/branches/list/"+t.$route.params.id+"/edit/"+e.guid)}}})],1)}}])})],1),n("a-tab-pane",{key:"2",attrs:{tab:"Счёт фактура"}},[n("productsList")],1),n("a-tab-pane",{key:"3",attrs:{tab:t.$t("Список Пос агенты")}},[n("pos-agent-list")],1)],1)],1)],1)},i=[],s=(n("d3b7"),n("a434"),n("c740"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-table",{attrs:{"row-key":function(t){return t.guid},bordered:"",pagination:t.pagination,scroll:{x:2e3,y:700},columns:t.columns1,loading:t.loading,"data-source":t.invoices},on:{change:t.getPagination},scopedSlots:t._u([{key:"created_at",fn:function(e){return n("span",{},[t._v(" "+t._s(t._f("moment")(e.created_at,t.$dateFormat)))])}},{key:"invoice_date",fn:function(e){return n("span",{},[t._v(" "+t._s(t._f("moment")(e.invoice_date,t.$dateFormat)))])}},{key:"verified",fn:function(e){return n("span",{},[t._v(" "+t._s(t.verify(e.verified)))])}},{key:"responsible_person",fn:function(e){return e.resposible_person?n("span",{},[t._v(" "+t._s(t.getSystemUser))]):t._e()}},{key:"actions",fn:function(e){return n("span",{staticClass:"span"},[n("a-tooltip",{attrs:{placement:"bottomLeft",title:t.$t("button.add")}},[n("a-button",{staticClass:"mx-1",attrs:{type:"primary",icon:"plus"},on:{click:function(n){return t.ok(e.guid)}}})],1)],1)}}],null,!0)},[n("span",{attrs:{slot:"products"},slot:"products"},[n("a",[t._v(" продукты ")])])]),n("a-modal",{attrs:{title:t.$t("addInvoice"),"on-ok":"handleOk"},on:{ok:t.addInvoice,cancel:t.handleCancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[[n("a-form-model",{attrs:{span:12,colon:!1}},[n("a-col",{staticStyle:{padding:"0 15px"}},[n("a-form-model-item",{attrs:{label:t.$t("invoice_date"),prop:"invoice_date"}},[n("a-date-picker",{attrs:{format:t.$dateFormat},model:{value:t.invoice_date,callback:function(e){t.invoice_date=e},expression:"invoice_date"}})],1)],1),n("a-col",{staticStyle:{padding:"0 15px"}},[n("a-form-model-item",{attrs:{label:t.$t("invoice_number"),prop:"invoice_number"}},[n("a-input",{model:{value:t.invoice_number,callback:function(e){t.invoice_number=e},expression:"invoice_number"}})],1)],1)],1)]],2)],1)}),o=[],r=n("5530"),c=(n("b0c0"),{data:function(){var t=this;return{visible:!1,loading:!1,invoice_date:"",invoice_number:"",incoiceId:"",invoices:[],pagination:{current:1,showQuickJumper:!0},columns1:[{title:this.$t("Verified"),scopedSlots:{customRender:"verified"},key:"verified",width:100},{title:this.$t("contract_number"),dataIndex:"contract_number",key:"contract_number"},{title:this.$t("created at"),scopedSlots:{customRender:"created_at"},width:100,key:"created_at"},{title:this.$t("products"),scopedSlots:{customRender:"products"},key:"products",width:100,customCell:function(e,n){return{on:{click:function(n){t.$router.push({name:"products-list",params:{id:e.guid}})}}}}},{title:this.$t("installment_amount"),dataIndex:"installment_amount",key:"installment_amount"},{title:this.$t("merchant"),dataIndex:"merchant.merchant.name",key:"merchant.merchant.name"},{title:this.$t("merchant_branch"),dataIndex:"merchant.merchant_branch.name",key:"merchant.merchant_branch.name"},{title:this.$t("invoice_date"),scopedSlots:{customRender:"invoice_date"},key:"invoice_date"},{title:this.$t("invoice_number"),dataIndex:"invoice_number",key:"invoice_number"},{title:this.$t("responsible_person"),scopedSlots:{customRender:"responsible_person"},key:"responsible_person"},{title:this.$t("commentary"),dataIndex:"commentary",key:"commentary"},{title:this.$t("category.table.Actions"),scopedSlots:{customRender:"actions"},key:"actions",width:100}]}},methods:{getPagination:function(t){this.$router.push({path:this.$router.fullPath,query:{page:t.current,limit:10}}),this.getMerchantUserInvoices({query:{page:t.current,limit:10},id:this.$route.params.id}),this.pagination.current=t.current},ok:function(t){this.invoiceId=t,this.visible=!0},dust:function(){return{id:this.invoiceId,data:{invoice_date:this.invoice_date,invoice_number:this.invoice_number}}},handleCancel:function(t){this.visible=!1},addInvoice:function(){var t=this;this.$store.dispatch("addInvoice",this.dust()).then((function(e){t.$message.success("Invoice has added successfully"),t.visible=!1}))},verify:function(t){return!0===t?"Да":"Нет"},getSystemUser:function(t){var e=this;return this.$store.dispatch("getSystemUser",t).then((function(t){e.userName=t.name})),this.userName},getMerchantUserInvoices:function(t){var e=this;this.loading=!0,this.$store.dispatch("getMerchantUserInvoices",t).then((function(t){e.invoices=t.invoices;var n=Object(r["a"])({},e.pagination);n.total=t.count,e.pagination=n})).finally((function(){e.loading=!1}))}},created:function(){this.getMerchantUserInvoices({query:{page:1,limit:10},id:this.$route.params.id})}}),u=c,d=n("2877"),l=Object(d["a"])(u,s,o,!1,null,null,null),h=l.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-row",{staticClass:"mb-2",attrs:{type:"flex",justify:"end"}},[n("a-col",{attrs:{span:"auto"}},[n("div",{staticClass:"nav-block"},[n("a-input",{staticClass:"search-input",attrs:{placeholder:t.$t("search")},model:{value:t.seachText,callback:function(e){t.seachText=e},expression:"seachText"}}),n("a-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.$router.push("/posAgents/list/new")}}},[t._v(t._s(t.$t("button.create")))])],1)])],1),n("a-table",{attrs:{columns:t.columns,"data-source":t.pos_agents,"row-key":function(t){return t.guid},pagination:t.pagination,loading:t.loading},on:{change:t.getPagination},scopedSlots:t._u([{key:"created_at",fn:function(e){return n("span",{},[t._v(" "+t._s(t._f("moment")(e.created_at,t.$dateFormat)))])}},{key:"min_investment_amount",fn:function(e){return n("span",{},[t._v(" "+t._s(t.$moneyFormat(e.min_investment_amount)))])}},{key:"min_percent",fn:function(e){return n("span",{},[n("strong",[t._v(" "+t._s(e.min_percent)+"% ~ "+t._s(e.max_percent)+"%")])])}},{key:"actions",fn:function(e){return n("span",{staticClass:"span"},[n("delete-btn",{on:{confirm:function(n){return t.deletePosAgents(e)}}}),n("edit-btn",{on:{click:function(){}}})],1)}}])})],1)},p=[],f=n("f7fe"),_=n.n(f),v={data:function(){return{seachText:"",columns:[{title:this.$t("First_name"),dataIndex:"first_name",key:"first_name"},{title:this.$t("username"),dataIndex:"username",key:"username"},{title:this.$t("phone"),dataIndex:"phone",key:"phone"},{title:this.$t("category.table.Actions"),scopedSlots:{customRender:"actions"},key:"actions",width:150}],pos_agents:[],pagination:{current:1,showQuickJumper:!0},loading:!1}},methods:{searchPosAgents:_()((function(t){this.pagination.current=1,this.getPosAgents()}),300),getPosAgents:function(){var t=this;this.loading=!0,this.$store.dispatch("getPosAgentsMerchant",{page:this.pagination.current,limit:10,search:this.seachText}).then((function(e){t.pos_agents=e;var n=Object(r["a"])({},t.pagination);n.total=e.count,t.pagination=n})).catch((function(e){t.$alertMessage(e.response.data.message)})).finally((function(){t.loading=!1}))},deletePosAgents:function(t){var e=this;this.$store.dispatch("deletePosAgents",t.id).then((function(){e.$message.success("Пос-агент успешно удален"),e.getPosAgents()})).catch((function(t){e.$alertMessage(t.response.data.message)}))}},created:function(){this.getPosAgents()},watch:{seachText:function(){this.searchPosAgents()}}},g=v,b=(n("a574"),Object(d["a"])(g,m,p,!1,null,null,null)),y=b.exports,$={data:function(){return{columns:[{title:this.$t("branchId"),dataIndex:"guid",key:"guid"},{title:this.$t("created_at"),scopedSlots:{customRender:"created_at"},key:"created_at"},{title:this.$t("Name"),dataIndex:"name",key:"name"},{title:this.$t("Phone number"),dataIndex:"phone_number",key:"phone_number"},{title:this.$t("updated_at"),scopedSlots:{customRender:"updated_at"},key:"updated_at"},{title:this.$t("category.table.Actions"),scopedSlots:{customRender:"actions"},key:"actions",width:140}],merchant_branches:[],loading:!1}},components:{productsList:h,PosAgentList:y},methods:{callback:function(){},getBranchByMerchant:function(t){var e=this;this.loading=!0,this.$store.dispatch("getBranchByMerchant",this.$route.params.id).then((function(t){e.merchant_branches=t.list})).catch((function(t){e.$message.error(t.response.data.message)})).finally((function(){e.loading=!1}))},deleteBranch:function(t){var e=this;this.$store.dispatch("deleteBranch",{merchant_id:this.$route.params.id,branch_id:t.guid}).then((function(n){e.merchant_branches.splice(e.merchant_branches.findIndex((function(e){return e.guid===t.guid})),1),e.$message.success("Branch deleted successfully")})).catch((function(t){e.$message.error(t.response.data.message)}))}},created:function(){this.getBranchByMerchant(this.$route.params.id)}},k=$,x=Object(d["a"])(k,a,i,!1,null,null,null);e["default"]=x.exports},a574:function(t,e,n){"use strict";n("0dbdf")},f7fe:function(t,e,n){(function(e){var n="Expected a function",a=NaN,i="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,h=d||l||Function("return this")(),m=Object.prototype,p=m.toString,f=Math.max,_=Math.min,v=function(){return h.Date.now()};function g(t,e,a){var i,s,o,r,c,u,d=0,l=!1,h=!1,m=!0;if("function"!=typeof t)throw new TypeError(n);function p(e){var n=i,a=s;return i=s=void 0,d=e,r=t.apply(a,n),r}function g(t){return d=t,c=setTimeout(x,e),l?p(t):r}function y(t){var n=t-u,a=t-d,i=e-n;return h?_(i,o-a):i}function $(t){var n=t-u,a=t-d;return void 0===u||n>=e||n<0||h&&a>=o}function x(){var t=v();if($(t))return I(t);c=setTimeout(x,y(t))}function I(t){return c=void 0,m&&i?p(t):(i=s=void 0,r)}function w(){void 0!==c&&clearTimeout(c),d=0,i=u=s=c=void 0}function S(){return void 0===c?r:I(v())}function j(){var t=v(),n=$(t);if(i=arguments,s=this,u=t,n){if(void 0===c)return g(u);if(h)return c=setTimeout(x,e),p(u)}return void 0===c&&(c=setTimeout(x,e)),r}return e=k(e)||0,b(a)&&(l=!!a.leading,h="maxWait"in a,o=h?f(k(a.maxWait)||0,e):o,m="trailing"in a?!!a.trailing:m),j.cancel=w,j.flush=S,j}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){return!!t&&"object"==typeof t}function $(t){return"symbol"==typeof t||y(t)&&p.call(t)==i}function k(t){if("number"==typeof t)return t;if($(t))return a;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=r.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):o.test(t)?a:+t}t.exports=g}).call(this,n("c8ba"))}}]);