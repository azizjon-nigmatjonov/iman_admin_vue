(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33e10c20"],{"38d9":function(t,a,e){"use strict";e("f6d68")},5730:function(t,a,e){t.exports=e.p+"assets/pdf.1800da4a.svg"},"5e4e":function(t,a,e){t.exports=e.p+"assets/docs.b168f4c9.svg"},"72d7":function(t,a,e){t.exports=e.p+"assets/excel.79dfea41.svg"},"7fa7":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("a-navigation",{attrs:{list:[{name:t.$t("Mudaraba"),link:""}],isBack:{flag:!0,link:"/mudaraba/iput",return:!0},noBorder:""}}),i("a-card",{staticClass:"no-space-tab"},[t.applicationData&&t.applicationData.investor?i("a-tabs",{staticClass:"no-margin-bar",model:{value:t.activeTab,callback:function(a){t.activeTab=a},expression:"activeTab"}},[i("a-tab-pane",{key:"1",attrs:{tab:t.$t("investorData")}},[i("a-card",{staticClass:"no-border-card no-pt-body-card",attrs:{title:t.$t("Application form")}},[i("a-form-model",[i("a-row",{attrs:{gutter:16}},[i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("status"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.$t(t.applicationData.status)||"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("type"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.$t(t.applicationData.type)||"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("amount"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.data.strategy?t.$moneyFormat(+t.applicationData.data.strategy.amount):"-",disabled:""}})],1)],1),t.isCashIn?[i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("risk_type"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.data.strategy?t.applicationData.data.strategy.risk:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("month_limit"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.data.strategy?t.applicationData.data.strategy.month_limit:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("payment_type"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.payment_type?t.$t(t.applicationData.payment_type):"-",disabled:""}})],1)],1)]:[i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("card_number"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.data.bank?t.applicationData.data.bank.recipient_account_number:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("bank_name"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.data.bank?t.applicationData.data.bank.bank_name:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("MFO"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.data.bank?t.applicationData.data.bank.mfo:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("transit_account"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.data.bank?t.applicationData.data.bank.transit_account:"-",disabled:""}})],1)],1)]],2)],1)],1),i("a-card",{staticClass:"no-border-card no-pt-body-card",attrs:{title:t.$t("passportData")}},[i("a-form-model",[i("a-row",{attrs:{gutter:16}},[i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("investors.table.first_name"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.passport_data.first_name||"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("investors.table.last_name"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.passport_data.last_name||"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("patronymic"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.passport_data.patronymic||"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("investors.table.birthday"),prop:"min_investment_amount"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{"show-time":"",format:t.$dateFormat,placeholder:"Select Time",disabled:""},model:{value:t.applicationData.investor.passport_data.birth_day,callback:function(a){t.$set(t.applicationData.investor.passport_data,"birth_day",a)},expression:"applicationData.investor.passport_data.birth_day"}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("investors.table.gender"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.passport_data.gender||"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("investors.table.passport_id"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.passport_data.doc_number||"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("investors.table.issue_date"),prop:"min_investment_amount"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:t.$dateFormat,"show-time":"",placeholder:"Select Time",disabled:""},model:{value:t.applicationData.investor.passport_data.date_of_issue,callback:function(a){t.$set(t.applicationData.investor.passport_data,"date_of_issue",a)},expression:"applicationData.investor.passport_data.date_of_issue"}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("investors.table.expiry_date"),prop:"min_investment_amount"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:t.$dateFormat,"show-time":"",placeholder:"Select Time",disabled:""},model:{value:t.applicationData.investor.passport_data.date_of_expiry,callback:function(a){t.$set(t.applicationData.investor.passport_data,"date_of_expiry",a)},expression:"applicationData.investor.passport_data.date_of_expiry"}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("domestic_phone_number"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.kyc?t.applicationData.investor.kyc.domestic_phone_number:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("email"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.kyc?t.applicationData.investor.kyc.email:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("monthly_income"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.kyc?t.applicationData.investor.kyc.monthly_income:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("phone_number"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.phone_number?t.applicationData.investor.phone_number:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("type"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.type?t.applicationData.investor.type:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("inn"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.inn?t.applicationData.investor.inn:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("inps"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.inps?t.applicationData.investor.inps:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("country"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.country?t.applicationData.investor.country:"-",disabled:""}})],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("actual_address"),prop:"min_investment_amount"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{value:t.applicationData.investor.kyc?t.applicationData.investor.kyc.actual_address:"-",disabled:""}})],1)],1)],1),Boolean(t.claimCard)?i("div",{staticStyle:{width:"100%"}},[i("a-divider",{staticStyle:{margin:"24px -24px",width:"calc(100% + 48px)"}}),i("a-row",[i("a-col",{attrs:{span:24}},[i("a-descriptions",{attrs:{title:t.$t("investor.card"),layout:"vertical",column:4,bordered:""}},[i("a-descriptions-item",{attrs:{label:t.$t("card.number")}},[t._v(" "+t._s(t.claimCard.card_number)+" ")]),i("a-descriptions-item",{attrs:{label:t.$t("card_expiry_month")}},[t._v(" "+t._s(t.claimCard.expiry_date.slice(2,4))+" ")]),i("a-descriptions-item",{attrs:{label:t.$t("card_expiry_year")}},[t._v(" "+t._s(t.claimCard.expiry_date.slice(0,2))+" ")])],1)],1)],1),i("a-divider",{staticStyle:{margin:"24px -24px",width:"calc(100% + 48px)"}})],1):t._e(),i("a-row",{attrs:{gutter:16}},[i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("registration_photo"),prop:"min_investment_amount"}},[i("a-upload",{staticClass:"picture-card",attrs:{"list-type":"picture-card",disabled:"","file-list":t.fileList},on:{preview:function(a){return t.handlePreview(a,"")},change:function(a){return t.handleChange(a,"fileList")}}},[t.fileList.length<1?i("div",[i("a-icon",{attrs:{type:"plus"}}),i("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.$t("button.upload")))])],1):t._e()]),i("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:function(a){t.previewVisible=!1}}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:t.previewImage,src:t.previewImage}})])],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("profile_photo"),prop:"min_investment_amount"}},[i("a-upload",{staticClass:"picture-card",attrs:{"list-type":"picture-card",disabled:"","file-list":t.fileList2},on:{preview:function(a){return t.handlePreview(a,"2")},change:function(a){return t.handleChange(a,"fileList2")}}},[t.fileList2.length<1?i("div",[i("a-icon",{attrs:{type:"plus"}}),i("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.$t("button.upload")))])],1):t._e()]),i("a-modal",{attrs:{visible:t.previewVisible2,footer:null},on:{cancel:function(a){t.previewVisible2=!1}}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:t.previewImage2,src:t.previewImage2}})])],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("Passport_photo"),prop:"min_investment_amount"}},[i("a-upload",{staticClass:"picture-card",attrs:{"list-type":"picture-card",disabled:"","file-list":t.fileList3},on:{preview:function(a){return t.handlePreview(a,"3")},change:function(a){return t.handleChange(a,"fileList3")}}},[t.fileList3.length<1?i("div",[i("a-icon",{attrs:{type:"plus"}}),i("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.$t("button.upload")))])],1):t._e()]),i("a-modal",{attrs:{visible:t.previewVisible3,footer:null},on:{cancel:function(a){t.previewVisible3=!1}}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:t.previewImage3,src:t.previewImage3}})])],1)],1),i("a-col",{attrs:{lg:8,md:12}},[i("a-form-model-item",{attrs:{label:t.$t("photo_document"),prop:"min_investment_amount"}},[i("a-upload",{staticClass:"picture-card",attrs:{"list-type":"picture-card",disabled:"","file-list":t.fileList4},on:{preview:function(a){return t.handlePreview(a,"4")},change:function(a){return t.handleChange(a,"fileList4")}}},[t.fileList4.length<1?i("div",[i("a-icon",{attrs:{type:"plus"}}),i("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.$t("button.upload")))])],1):t._e()]),i("a-modal",{attrs:{visible:t.previewVisible4,footer:null},on:{cancel:function(a){t.previewVisible4=!1}}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:t.previewImage4,src:t.previewImage4}})])],1)],1)],1)],1),t.isCashOut?t._e():i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end","margin-top":"20px"}},[i("div",{staticStyle:{"margin-right":"10px"}},[t._v(" "+t._s(t.$t("changePaymentType"))+": ")]),i("a-select",{staticStyle:{width:"100%","max-width":"300px","margin-right":"10px"},model:{value:t.paymentForm.payment_type_id,callback:function(a){t.$set(t.paymentForm,"payment_type_id",a)},expression:"paymentForm.payment_type_id"}},t._l(t.paymentTypes,(function(a){return i("a-select-option",{key:a.payment_type_id,attrs:{value:a.payment_type_id}},[t._v(" "+t._s(t.$t(a.payment_type))+" ")])})),1),i("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onChangePayment}},[t._v(" "+t._s(t.$t("save"))+" ")])],1)],1)],1),i("a-tab-pane",{key:"3",attrs:{tab:t.$t("updateHistory")}},[i("a-card",[i("a-table",{attrs:{bordered:"",scroll:{x:200,y:700},pagination:!1,columns:t.column1,"data-source":t.applicationData.statuses},scopedSlots:t._u([{key:"user",fn:function(a){return i("span",{},[t._v(" "+t._s(t.$t(a.user&&a.user.name||""))+" ")])}},{key:"status",fn:function(a){return i("span",{},[t._v(" "+t._s(t.$t(a.status))+" ")])}},{key:"date",fn:function(a){return i("span",{},[t._v(" "+t._s(t._f("moment")(a.created_at,t.$dateFormat))+" ")])}},{key:"comment",fn:function(a){return i("span",{},[t._v(" "+t._s(a.comment&&t.moment(a.comment).isValid()?t.moment(a.comment).format("DD.MM.YYYY"):a.comment)+" ")])}}],null,!1,2573342720)}),i("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules}},[i("div",{staticClass:"mb-2",staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end","margin-top":"20px"}},[i("div",{staticStyle:{"margin-right":"10px"}},[t._v(" "+t._s(t.$t("changeStatus"))+": ")]),i("a-select",{staticStyle:{width:"100%","max-width":"300px","margin-right":"10px"},on:{change:t.onStatusChange},model:{value:t.form.status,callback:function(a){t.$set(t.form,"status",a)},expression:"form.status"}},[t._l(t.filteredStatus,(function(a){return i("a-select-option",{key:a.status_id,attrs:{disabled:"paid"===t.applicationData.status&&"cancelled"===a.status||"success"===t.applicationData.status&&"cancelled"===a.status,value:a.status}},[t._v(" "+t._s(t.$t(a.status))+" ")])})),i("a-select-option",{attrs:{value:t.applicationData.status,disabled:""}},[t._v(" "+t._s(t.$t(t.applicationData.status))+" ")])],2),i("a-button",{attrs:{type:"primary",disabled:t.applicationData.status===t.form.status,loading:t.loading},on:{click:t.onChangeStatus}},[t._v(" "+t._s(t.$t("save"))+" ")])],1),t.editCancel?i("a-row",{attrs:{type:"flex",justify:"end"}},[i("a-col",{attrs:{md:12,span:24}},[i("a-form-model-item",{ref:"comment",attrs:{label:t.$t("commentary"),prop:"comment"}},[i("a-textarea",{attrs:{placeholder:t.$t("Описание"),"max-length":255},model:{value:t.form.comment,callback:function(a){t.$set(t.form,"comment",a)},expression:"form.comment"}})],1)],1)],1):t._e()],1)],1)],1),i("a-tab-pane",{key:"4",attrs:{tab:t.$t("files")}},[i("a-card",[i("a-table",{attrs:{bordered:"",scroll:{x:200,y:700},pagination:!1,columns:t.columns0,"data-source":t.array0},scopedSlots:t._u([{key:"type",fn:function(a){return i("span",{},[t._v(" "+t._s(t.$t(a.type))+" ")])}},{key:"icon",fn:function(a){return i("span",{},["photo"===a.format?i("img",{attrs:{width:"25",height:"25",src:e("931c")}}):"pdf"===a.format?i("img",{attrs:{width:"25",height:"25",src:e("5730")}}):"doc"===a.format?i("img",{attrs:{width:"25",height:"25",src:e("9f02")}}):"excel"===a.format?i("img",{attrs:{width:"25",height:"25",src:e("72d7")}}):i("img",{attrs:{width:"25",height:"25",src:e("5e4e")}}),t._v(" "+t._s(a.title)+" ")])}},{key:"file",fn:function(a){return i("span",{},[t._v(" "+t._s("photo"===a.format?"Изображение":"Документ"))])}},{key:"actions",fn:function(a){return i("span",{staticClass:"span"},[i("a-row",{attrs:{type:"flex",gutter:[8,8]}},[i("a-col",{attrs:{span:"auto"}},["pdf"===a.format?i("a",{attrs:{href:a.file,target:"blank",disabled:!a.file}},[i("icon-btn",{attrs:{icon:"eye",tooltip:t.$t("button.preview")}})],1):"doc"===a.format||"docx"===a.format?i("icon-btn",{attrs:{icon:"eye",tooltip:t.$t("button.preview")},on:{click:function(e){return t.go(a)}}}):i("icon-btn",{attrs:{icon:"eye",tooltip:t.$t("button.preview")},on:{click:function(e){t.imageFile=a.file,t.visible=!0}}})],1),i("a-col",{attrs:{span:"auto"}},[i("icon-btn",{attrs:{tooltip:t.$t("button.preview"),icon:"download",color:"green"},on:{click:function(e){return t.download(a)}}})],1)],1)],1)}}],null,!1,2956052366)})],1)],1)],1):t._e(),t.imageFile?i("a-modal",{attrs:{title:t.$t("Investor"),footer:null,width:700},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[i("center",[i("img",{staticStyle:{"max-width":"100%",margin:"0 auto"},attrs:{src:t.imageFile,alt:t.imageFile.split("/").pop()}})])],1):t._e(),i("a-modal",{attrs:{title:t.$t("select.date"),okType:"primary",okText:"Выбрать",cancelText:t.$t("button.cancel")},on:{ok:t.dateModalAcceptHandler},model:{value:t.datePickerModal,callback:function(a){t.datePickerModal=a},expression:"datePickerModal"}},[i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","margin-top":"40px"}},[i("a-date-picker",{staticStyle:{width:"70%"},model:{value:t.selectedDate,callback:function(a){t.selectedDate=a},expression:"selectedDate"}})],1)]),i("a-modal",{attrs:{title:t.$t("Вы подтверждаете изменения статуса?"),okType:"primary",okText:"Подтвердить",cancelText:t.$t("button.cancel"),"confirm-loading":t.modalLoading},on:{ok:t.modalConfirmHandler},model:{value:t.acceptModal,callback:function(a){t.acceptModal=a},expression:"acceptModal"}})],1)],1)},n=[],s=e("1da1"),o=e("5530"),r=(e("96cf"),e("caad"),e("2532"),e("ac1f"),e("1276"),e("b0c0"),e("4de4"),e("d3b7"),e("7db0"),e("9911"),e("3ca3"),e("ddb0"),e("2b3d"),e("9861"),e("d81d"),e("5880")),l=e("c1df"),p=e.n(l),c={data:function(){return{fileList:[],fileList2:[],fileList3:[],fileList4:[],claimCard:null,selectedDate:null,amountType:null,previewImage:"",previewImage2:"",previewImage3:"",previewImage4:"",previewVisible:!1,previewVisible2:!1,previewVisible3:!1,previewVisible4:!1,uploadingImage:!1,uploadingImage2:!1,uploadingImage3:!1,uploadingImage4:!1,editCancel:!1,paymentTypes:[],loading:!1,visible:!1,imageFile:"",editStatus:!1,applicationData:{},activeTab:"1",statuses:["request_sent","confirmed","pending","paid","check_payment_pending","signature_pending","success","cancelled","rejected"],column1:[{title:this.$t("status"),scopedSlots:{customRender:"status"},key:"status"},{title:this.$t("date"),scopedSlots:{customRender:"date"},key:"date"},{title:this.$t("whoChanged"),scopedSlots:{customRender:"user"},key:"user"},{title:this.$t("commentary"),scopedSlots:{customRender:"comment"},key:"comment"}],statusList:[],array0:[],link:"https://view.officeapps.live.com/op/embed.aspx?src=",fileTypes:{agreement:"",partnership_left:"",withdraw_dividends:"",certificate:""},datePickerModal:!1,acceptModal:!1,form:{status_id:null,status:"",comment:void 0},rules:{},paymentForm:{payment_type_id:void 0},columns0:[{title:this.$t("filename"),scopedSlots:{customRender:"icon"},key:"icon"},{title:this.$t("type"),scopedSlots:{customRender:"type"},key:"type"},{title:this.$t("category.table.Actions"),scopedSlots:{customRender:"actions"},key:"actions",width:220}],isCashOut:this.$route.path.split("/").includes("cash_out")}},computed:{isCashIn:function(){return"mudaraba-input-detail"===this.$route.name},filteredStatus:function(){var t=this,a=0,e=this.statusList;return["bank_cash","bank_transfer"].includes(this.applicationData.payment_type)&&(e=this.statusList.filter((function(t){return"confirmed"!==t.status}))),e.filter((function(e){if("cancelled"===t.applicationData.status)return!1;if("success"===e.status)return!1;if("cancelled"===e.status)return!0;if(t.isCashOut){if(t.applicationData.statuses.find((function(t){return t.status===e.status}))||"paid"===e.status)return!1}else{if(!["card","paynet"].includes(t.applicationData.payment_type)&&["request_sent","confirmed"].includes(t.applicationData.status))return!1;if(t.applicationData.statuses.find((function(t){return t.status===e.status})))return!1;if(["bank_cash","bank_transfer"].includes(t.applicationData.payment_type)&&"check_payment_pending"===e.status)return!0;if(["signature_pending","check_payment_pending"].includes(e.status))return!1;if(["card","paynet"].includes(t.applicationData.payment_type)&&"paid"===e.status)return!1;if(["card","paynet"].includes(t.applicationData.payment_type)&&"confirmed"===t.applicationData.status)return!1;if(["card"].includes(t.applicationData.payment_type)&&"confirmed"===e.status)return!1}return(1!==a||"cancelled"===e.status)&&(a++,!0)}))}},mounted:function(){var t=this;this.$store.dispatch("getStatuses",{is_cash_out:this.$route.path.split("/").includes("cash_out")}).then((function(a){t.statusList=a.statuses;var e=t.statusList.find((function(a){return a.status===t.applicationData.status}));t.form.status=e&&e.status,t.form.status_id=e&&e.status_id})),this.$store.dispatch("getPaymentTypes",{}).then((function(a){t.paymentTypes=a.payment_types;var e=t.paymentTypes.find((function(a){return a.payment_type===t.applicationData.payment_type}));t.paymentForm.payment_type_id=e&&e.payment_type_id}))},methods:Object(o["a"])(Object(o["a"])({moment:p.a},Object(r["mapActions"])(["getClaimCardByID"])),{},{handleChange:function(t){var a=t.fileList;0===a.length&&(this.fileList=a)},handlePreview:function(t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,a.$getBase64(t.originFileObj);case 3:t.preview=e.sent;case 4:a.previewImage=t.url||t.preview,a.previewVisible=!0;case 6:case"end":return e.stop()}}),e)})))()},onStatusChange:function(t){var a=this.statusList.find((function(a){return a.status===t}));this.form.status_id=a.status_id,"cancelled"===t?(this.editCancel=!0,this.rules.comment=[{required:!0,message:"Пожалуйста, введите комментарий",trigger:"change"}],this.form.comment=""):(this.editCancel=!1,this.rules={},delete this.form.comment)},go:function(t){window.open("photo"!==t.format?this.link+t.file:t.file,"_blank")},download:function(t){return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch(t.file).then((function(t){return t.blob()})).then((function(a){var e=document.createElement("a");e.href=window.URL.createObjectURL(new Blob([a])),e.setAttribute("download",t.title),document.body.appendChild(e),e.click()}));case 2:case"end":return a.stop()}}),a)})))()},onChangeStatus:function(){var t=this;this.$refs.ruleForm.validate((function(a){if(a){if("paid"!==t.form.status||t.amountType.includes("UZS"))return t.changeApplicationStatus(t.form);t.datePickerModal=!0}}))},dateModalAcceptHandler:function(){if(!this.selectedDate)return null;this.datePickerModal=!1,this.acceptModal=!0},modalConfirmHandler:function(){this.acceptModal=!1,this.changeApplicationStatus(Object(o["a"])(Object(o["a"])({},this.form),{},{comment:this.selectedDate}))},changeApplicationStatus:function(t){var a=this;this.loading=!0,this.$store.dispatch("sendApplicationToNextStatus",{id:this.$route.params.id,data:t}).then((function(t){a.loading=!1,a.$route.go(),a.editStatus=!1})).catch((function(){a.loading=!1})).finally((function(){a.form={status_id:null,status:"",comment:void 0},a.editCancel=!1,a.getApplicationsDetail()}))},onChangePayment:function(){var t=this;this.loading=!0,this.$store.dispatch("setApplicationPaymentType",{id:this.$route.params.id,data:this.paymentForm}).then((function(a){t.loading=!1,t.$route.go(),t.editStatus=!1})).catch((function(){t.loading=!1})).finally((function(){t.getApplicationsDetail()}))},getClaimCard:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&this.getClaimCardByID({id:t,params:e}).then((function(t){a.claimCard=t.card})).catch((function(){return a.$message.error("error")}))},getApplicationsDetail:function(){var t=this;this.$store.dispatch("getApplicationsDetail",{id:this.$route.params.id}).then((function(a){var e,i,n;t.amountType=null===a||void 0===a||null===(e=a.claim)||void 0===e||null===(i=e.data)||void 0===i||null===(n=i.bank)||void 0===n?void 0:n.currency,t.getClaimCard(a.claim.card_id),t.applicationData=a.claim,t.fileList=t.applicationData.investor.passport_data.registration_photo?[{uid:t.applicationData.investor.passport_data.registration_photo.split("/").pop(),url:t.applicationData.investor.passport_data.registration_photo,status:"done",name:t.applicationData.investor.passport_data.registration_photo}]:[],t.fileList2=t.applicationData.investor.profile_photo?[{uid:t.applicationData.investor.profile_photo.split("/").pop(),url:t.applicationData.investor.profile_photo,status:"done",name:t.applicationData.investor.profile_photo}]:[],t.fileList3=t.applicationData.investor.passport_data.passport_photo?[{uid:t.applicationData.investor.passport_data.passport_photo.split("/").pop(),url:t.applicationData.investor.passport_data.passport_photo,status:"done",name:t.applicationData.investor.passport_data.passport_photo}]:[],t.fileList4=t.applicationData.investor.passport_data.photo_document?[{uid:t.applicationData.investor.passport_data.photo_document.split("/").pop(),url:t.applicationData.investor.passport_data.photo_document,status:"done",name:t.applicationData.investor.passport_data.photo_document}]:[];var s=t.statusList.find((function(a){return a.status===t.applicationData.status}));t.form.status=s&&s.status,t.form.status_id=s&&s.status_id;var o=["svg","png","jpg","jpeg"],r=t.paymentTypes.find((function(a){return a.payment_type===t.applicationData.payment_type}));t.paymentForm.payment_type_id=r&&r.payment_type_id,t.array0=a.claim.files.map((function(t){var a=t.title.split(".").pop();return{file:t.file_name,key:Math.random(),type:t.type,title:t.title,format:a.includes("doc")?"doc":a.includes("pdf")?"pdf":a.includes("xls")?"excel":o.includes(a)?"photo":"file"}}))}))}}),created:function(){this.getApplicationsDetail(this.$route.params.id)}},d=c,m=(e("38d9"),e("2877")),u=Object(m["a"])(d,i,n,!1,null,"17fc6b92",null);a["default"]=u.exports},"931c":function(t,a,e){t.exports=e.p+"assets/image.eb5d81af.svg"},"9f02":function(t,a,e){t.exports=e.p+"assets/word.a60c33da.svg"},f6d68:function(t,a,e){}}]);