(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05ebc6b4"],{5820:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._e(),n("a-row",{attrs:{type:"flex",justify:"end"}},[n("a-col",{attrs:{span:"auto"}},[t.saveButtonVisible?n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:t.saveButtonLoading},on:{click:t.saveOrder}},[t._v(t._s(t.$t("button.saveOrder")))]):t._e(),n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/advices/categories/new")}}},[t._v(t._s(t.$t("button.create")))])],1)],1),n("a-tabs",{model:{value:t.tabCurrent,callback:function(e){t.tabCurrent=e},expression:"tabCurrent"}},[n("a-tab-pane",{key:1,attrs:{tab:t.$t("Categories")}},[n("a-card",{staticClass:"no-space-tab"},[n("a-card",[n("a-table",{attrs:{columns:t.columns,"data-source":t.categories,"row-key":function(t){return t.guid},size:"middle",pagination:t.pagination,loading:t.loading,bordered:""},on:{change:t.getPagination},scopedSlots:t._u([{key:"index",fn:function(e,i,a){return n("span",{},[t._v(" "+t._s(10*(t.pagination.current-1)+a+1)+" ")])}},{key:"actions",fn:function(e){return n("span",{},[n("arrow-btn",{attrs:{type:"up"},on:{click:function(n){return t.upButtonHandler(e)}}}),n("arrow-btn",{attrs:{type:"down"},on:{click:function(n){return t.downButtonHandler(e)}}}),n("edit-btn",{on:{click:function(n){return t.$router.push({name:"advices-categories-edit",params:{id:e.guid}})}}}),n("delete-btn",{on:{confirm:function(n){return t.deleteCategory(e)}}})],1)}}])})],1)],1)],1),n("a-tab-pane",{key:34435,attrs:{tab:t.$t("Актуальные советы")}},[n("ActualAdvices")],1)],1)],1)},a=[],s=n("5530"),r=(n("c740"),n("d81d"),n("d3b7"),n("707b")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-row",{attrs:{type:"flex",justify:"end"}},[n("a-col",{attrs:{span:"auto"}},[t.saveButtonVisible?n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:t.saveButtonLoading},on:{click:t.saveOrder}},[t._v(t._s(t.$t("button.saveOrder")))]):t._e()],1)],1),n("a-card",[n("a-table",{attrs:{columns:t.columns,"data-source":t.actualAdvices,rowKey:function(t){return t.guid}},scopedSlots:t._u([{key:"actions",fn:function(e){return n("span",{},[n("arrow-btn",{attrs:{type:"up"},on:{click:function(n){return t.upButtonHandler(e)}}}),n("arrow-btn",{attrs:{type:"down"},on:{click:function(n){return t.downButtonHandler(e)}}})],1)}},{key:"status",fn:function(e){return n("span",{},[n("a-switch",{on:{change:function(n){return t.updateIsActualProp(n,e)}},model:{value:e.is_actual,callback:function(n){t.$set(e,"is_actual",n)},expression:"text.is_actual"}})],1)}}])})],1)],1)},o=[],u=(n("4de4"),{components:{arrowBtn:r["a"]},data:function(){return{saveButtonLoading:!1,saveButtonVisible:!1,columns:[{title:"№",key:"index",width:70,dataIndex:"idx"},{title:this.$t("name"),key:"title",dataIndex:"title.ru"},{title:this.$t("Описание"),key:"description",dataIndex:"description.ru"},{title:this.$t("investors.table.actions"),scopedSlots:{customRender:"actions"},key:"actions",width:200,fixed:"right"},{title:this.$t("status"),scopedSlots:{customRender:"status"},key:"status",width:80,fixed:"right"}],actualAdvices:[]}},methods:{updateIsActualProp:function(t,e){var n=this;this.$store.dispatch("updateActualAdviceProp",{data:[{is_actual:t,guid:e.guid}]}).then((function(t){n.$alertMessage("success","Статус успешно обновлен","Он не удаляется. Был изменен статус актуальности",n),n.actualAdvices=n.actualAdvices.filter((function(t){return t.guid!==e.guid}))})).catch((function(t){n.$alertMessage("danger","Error",JSON.stringify(t),n)}))},upButtonHandler:function(t){var e=this.actualAdvices.findIndex((function(e){return e.guid===t.guid}));if(0===e)return null;var n=JSON.parse(JSON.stringify(this.actualAdvices));n[e]=n[e-1],n[e-1]=t,this.actualAdvices=n,this.saveButtonVisible=!0},downButtonHandler:function(t){var e=this.actualAdvices.findIndex((function(e){return e.guid===t.guid})),n=this.actualAdvices.length;if(e===n-1)return null;var i=JSON.parse(JSON.stringify(this.actualAdvices));i[e]=i[e+1],i[e+1]=t,this.actualAdvices=i,this.saveButtonVisible=!0},saveOrder:function(){var t=this,e=this.actualAdvices.map((function(t,e){return{guid:t.guid,position:e}}));this.saveButtonLoading=!0,this.$store.dispatch("updateActualAdviceOrder",e).then((function(e){t.$alertMessage("success","Message","Updated successfully updated",t),t.saveButtonVisible=!1})).finally((function(){t.saveButtonLoading=!1}))},getActualAdvices:function(){var t=this;this.$store.dispatch("getActualAdvices").then((function(e){t.actualAdvices=e.advices_list.map((function(t,e){return Object(s["a"])(Object(s["a"])({},t),{},{idx:e+1})}))})).catch((function(e){t.$message.error(e.response.data.message)}))}},created:function(){this.getActualAdvices()}}),d=u,l=n("2877"),g=Object(l["a"])(d,c,o,!1,null,null,null),p=g.exports,f={components:{arrowBtn:r["a"],ActualAdvices:p},data:function(){return{categories:[],tabCurrent:1,saveButtonVisible:!1,saveButtonLoading:!1,loading:!1,pagination:{current:1,showQuickJumper:!0},columns:[{title:"№",key:"index",width:70,scopedSlots:{customRender:"index"},customCell:this.onRowClick},{title:this.$t("name"),key:"name",dataIndex:"title.ru",customCell:this.onRowClick},{title:this.$t("investors.table.actions"),scopedSlots:{customRender:"actions"},key:"actions",width:200,fixed:"right"}]}},methods:{upButtonHandler:function(t){var e=this.categories.findIndex((function(e){return e.guid===t.guid}));if(0===e)return null;var n=JSON.parse(JSON.stringify(this.categories));n[e]=n[e-1],n[e-1]=t,this.categories=n,this.saveButtonVisible=!0},downButtonHandler:function(t){var e=this.categories.findIndex((function(e){return e.guid===t.guid})),n=this.categories.length;if(e===n-1)return null;var i=JSON.parse(JSON.stringify(this.categories));i[e]=i[e+1],i[e+1]=t,this.categories=i,this.saveButtonVisible=!0},saveOrder:function(){var t=this,e=this.categories.map((function(t,e){return{guid:t.guid,position:e}}));this.saveButtonLoading=!0,this.$store.dispatch("updateCategoriesOrder",e).then((function(e){t.$alertMessage("success","Message","Updated successfully updated",t),t.saveButtonVisible=!1})).finally((function(){t.saveButtonLoading=!1}))},onRowClick:function(t,e){var n=this;return{on:{click:function(e){n.$router.push("/advices/categories/".concat(t.guid,"/subcategories"))}}}},getPagination:function(t){var e={page:t.current,limit:10};this.pagination.current=t.current,this.getCategories(e)},getCategories:function(t){var e=this;this.loading=!0,this.$store.dispatch("getAdviceCategories",t).then((function(t){e.categories=t.categories_list;var n=Object(s["a"])({},e.pagination);n.total=t.count,e.pagination=n,e.loading=!1})).catch((function(t){e.$alertMessage(t.response.data.message),e.loading=!1}))},deleteCategory:function(t){var e=this;this.$store.dispatch("deleteAdviceCategory",t.guid).then((function(t){e.$alertMessage("success","Deleted","Investor has deleted successfully",e);var n={page:e.pagination.current,limit:10};e.getCategories(n)})).catch((function(t){t.response.data&&e.$alertMessage(t.response.data.message)}))},getList:function(){var t={page:this.pagination.current,limit:10};this.getCategories(t)}},created:function(){this.getList()},watch:{categories:function(t){}}},h=f,v=Object(l["a"])(h,i,a,!1,null,null,null);e["default"]=v.exports},"707b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-tag",{staticClass:"mx-1",staticStyle:{cursor:"pointer",width:"24px",height:"24px",display:"inline-flex","align-items":"center","justify-content":"center"},attrs:{color:"geekblue"},on:{click:function(e){return t.$emit("click")}}},["up"===t.type?n("a-icon",{attrs:{type:"caret-up"}}):n("a-icon",{attrs:{type:"caret-down"}})],1)},a=[],s={model:{prop:"value",event:"click"},props:{click:{type:Function,required:!1,default:function(){}},type:{type:String,default:"up"}}},r=s,c=n("2877"),o=Object(c["a"])(r,i,a,!1,null,"0c795e2c",null);e["a"]=o.exports}}]);